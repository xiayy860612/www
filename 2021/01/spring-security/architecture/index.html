<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"amos.s2u2m.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Spring Security的框架设计">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Security --- Architecture">
<meta property="og:url" content="https://amos.s2u2m.com/2021/01/spring-security/architecture/index.html">
<meta property="og:site_name" content="观澜">
<meta property="og:description" content="Spring Security的框架设计">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://amos.s2u2m.com/2021/01/spring-security/architecture/spring-security-integrate-to-spring.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/01/spring-security/architecture/filter-chain-design.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/01/spring-security/architecture/chain-default-filters.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/01/spring-security/architecture/SecurityContext.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/01/spring-security/architecture/spring-security-excepton-handle.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/01/spring-security/architecture/filtersecurityinterceptor.png">
<meta property="article:published_time" content="2021-01-23T13:29:01.000Z">
<meta property="article:modified_time" content="2021-12-24T05:38:15.767Z">
<meta property="article:author" content="Amos">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="Spring Security">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://amos.s2u2m.com/2021/01/spring-security/architecture/spring-security-integrate-to-spring.png">

<link rel="canonical" href="https://amos.s2u2m.com/2021/01/spring-security/architecture/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Spring Security --- Architecture | 观澜</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">观澜</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">行到水穷处，坐看云起时</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://amos.s2u2m.com/2021/01/spring-security/architecture/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Amos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="观澜">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Spring Security --- Architecture
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-01-23 21:29:01" itemprop="dateCreated datePublished" datetime="2021-01-23T21:29:01+08:00">2021-01-23</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-24 13:38:15" itemprop="dateModified" datetime="2021-12-24T13:38:15+08:00">2021-12-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring-Security/" itemprop="url" rel="index"><span itemprop="name">Spring Security</span></a>
                </span>
            </span>

          
            <span id="/2021/01/spring-security/architecture/" class="post-meta-item leancloud_visitors" data-flag-title="Spring Security --- Architecture" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/01/spring-security/architecture/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/01/spring-security/architecture/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>2.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2 分钟</span>
            </span>
            <div class="post-description">Spring Security的框架设计</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="同Spring的集成"><a href="#同Spring的集成" class="headerlink" title="同Spring的集成"></a>同Spring的集成</h2><p>Spring Security的架构是完全基于标准的Servlet过滤器进行实现的,<br>所以只要是基于Java Servlet框架就可以集成它.</p>
<p>整个Spring Security的入口为FilterChainProxy.</p>
<p><img src="/2021/01/spring-security/architecture/spring-security-integrate-to-spring.png"></p>
<p>在Spring中定义名为<strong>springSecurityFilterChain</strong>的FilterChainProxy的bean实例,<br>然后通过DelegatingFilterProxy获取它, 并将它插入到Servlet的过滤器链中.</p>
<h2 id="过滤器链的设计"><a href="#过滤器链的设计" class="headerlink" title="过滤器链的设计"></a>过滤器链的设计</h2><p>FilterChainProxy的内部维护了多个过滤器链(SecurityFilterChain),<br>会按照Order注解定义的顺序, 每个SecurityFilterChain通过<strong>RequestMatcher</strong>对请求url进行匹配,<br>并使用第一个匹配的SecurityFilterChain对请求进行处理.<br>所以每个SecurityFilterChain的匹配规则和顺序.</p>
<ul>
<li>AutowiredWebSecurityConfigurersIgnoreParents#getWebSecurityConfigurers,<br>获取所有实现了<strong>WebSecurityConfigurer接口</strong>的SecurityFilterChain的配置</li>
<li>WebSecurityConfiguration#setFilterChainProxySecurityConfigurer,<br>对所有的SecurityFilterChain的配置根据Order注解进行排序,<br>并加载到WebSecurity中用于生成SecurityFilterChain.</li>
<li>WebSecurityConfiguration#springSecurityFilterChain,<br>定义了名为<strong>springSecurityFilterChain</strong>的FilterChainProxy的bean实例</li>
</ul>
<p><img src="/2021/01/spring-security/architecture/filter-chain-design.png"></p>
<h2 id="怎样配置过滤器链"><a href="#怎样配置过滤器链" class="headerlink" title="怎样配置过滤器链"></a>怎样配置过滤器链</h2><p>Spring Security通过实现WebSecurityConfigurer接口来进行相关的配置,<br>并且它提供了一个默认的抽象实现WebSecurityConfigurerAdapter,<br>它主要提供了3个方面的配置:</p>
<ul>
<li>WebSecurityConfigurerAdapter#configure(WebSecurity), 对FilterChainProxy进行配置</li>
<li>WebSecurityConfigurerAdapter#configure(HttpSecurity), 对SecurityFilterChain进行配置</li>
<li>WebSecurityConfigurerAdapter#configure(AuthenticationManagerBuilder), 对认证相关进行配置</li>
</ul>
<h2 id="核心的过滤器介绍"><a href="#核心的过滤器介绍" class="headerlink" title="核心的过滤器介绍"></a>核心的过滤器介绍</h2><p>每个SecurityFilterChain中都包含多个过滤器(Filter),<br>下面是一般默认加载的Filter.</p>
<p><img src="/2021/01/spring-security/architecture/chain-default-filters.png"></p>
<h3 id="SecurityContextPersistenceFilter"><a href="#SecurityContextPersistenceFilter" class="headerlink" title="SecurityContextPersistenceFilter"></a>SecurityContextPersistenceFilter</h3><p>检查当前请求是否有相关的session存在, 如果存在, 则获取保存的SecurityContext;<br>不存在, 则创建新的SecurityContext.</p>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="296px" preserveAspectRatio="none" style="width:1911px;height:296px;background:#FFFFFF;" version="1.1" viewBox="0 0 1911 296" width="1911px" zoomAndPan="magnify"><defs/><g><!--MD5=[86b30c3e0fe779331a576db045bd0856]
class SecurityContext--><g id="elem_SecurityContext"><rect codeLine="1" fill="#F1F1F1" height="48" id="SecurityContext" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145" x="574.5" y="241"/><ellipse cx="589.5" cy="257" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M590.4531,253.7813 L592.1719,253.7813 C592.5625,253.7813 592.75,253.75 592.875,253.6719 C593.1406,253.5156 593.2813,253.2344 593.2813,252.9375 C593.2813,252.6719 593.1719,252.4063 592.9375,252.2344 C592.7656,252.125 592.625,252.0938 592.1719,252.0938 L587.0313,252.0938 C586.5938,252.0938 586.4688,252.1094 586.3125,252.2031 C586.0625,252.3594 585.9063,252.6563 585.9063,252.9375 C585.9063,253.2188 586.0469,253.4688 586.2656,253.6406 C586.4219,253.75 586.6094,253.7813 587.0313,253.7813 L588.75,253.7813 L588.75,260.2969 L587.0313,260.2969 C586.5938,260.2969 586.4688,260.3125 586.3125,260.4219 C586.0625,260.5781 585.9063,260.8594 585.9063,261.1563 C585.9063,261.4063 586.0469,261.6719 586.2656,261.8281 C586.4219,261.9531 586.625,262 587.0313,262 L592.1719,262 C592.9219,262 593.2813,261.7188 593.2813,261.1563 C593.2813,260.875 593.1719,260.625 592.9375,260.4531 C592.7656,260.3281 592.625,260.2969 592.1719,260.2969 L590.4531,260.2969 L590.4531,253.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="113" x="603.5" y="261.8467">SecurityContext</text><line style="stroke:#181818;stroke-width:0.5;" x1="575.5" x2="718.5" y1="273" y2="273"/><line style="stroke:#181818;stroke-width:0.5;" x1="575.5" x2="718.5" y1="281" y2="281"/></g><!--MD5=[9a99cb9a334c3f5f64071e0b1ceb1139]
class SecurityContextRepository--><g id="elem_SecurityContextRepository"><rect codeLine="3" fill="#F1F1F1" height="48" id="SecurityContextRepository" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="221" x="295.5" y="116"/><ellipse cx="310.5" cy="132" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M311.4531,128.7813 L313.1719,128.7813 C313.5625,128.7813 313.75,128.75 313.875,128.6719 C314.1406,128.5156 314.2813,128.2344 314.2813,127.9375 C314.2813,127.6719 314.1719,127.4063 313.9375,127.2344 C313.7656,127.125 313.625,127.0938 313.1719,127.0938 L308.0313,127.0938 C307.5938,127.0938 307.4688,127.1094 307.3125,127.2031 C307.0625,127.3594 306.9063,127.6563 306.9063,127.9375 C306.9063,128.2188 307.0469,128.4688 307.2656,128.6406 C307.4219,128.75 307.6094,128.7813 308.0313,128.7813 L309.75,128.7813 L309.75,135.2969 L308.0313,135.2969 C307.5938,135.2969 307.4688,135.3125 307.3125,135.4219 C307.0625,135.5781 306.9063,135.8594 306.9063,136.1563 C306.9063,136.4063 307.0469,136.6719 307.2656,136.8281 C307.4219,136.9531 307.625,137 308.0313,137 L313.1719,137 C313.9219,137 314.2813,136.7188 314.2813,136.1563 C314.2813,135.875 314.1719,135.625 313.9375,135.4531 C313.7656,135.3281 313.625,135.2969 313.1719,135.2969 L311.4531,135.2969 L311.4531,128.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="189" x="324.5" y="136.8467">SecurityContextRepository</text><line style="stroke:#181818;stroke-width:0.5;" x1="296.5" x2="515.5" y1="148" y2="148"/><line style="stroke:#181818;stroke-width:0.5;" x1="296.5" x2="515.5" y1="156" y2="156"/></g><!--MD5=[c0e9df09858c93831bec50f6f100df88]
class HttpSessionSecurityContextRepository--><g id="elem_HttpSessionSecurityContextRepository"><rect codeLine="4" fill="#F1F1F1" height="48" id="HttpSessionSecurityContextRepository" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="317" x="222.5" y="241"/><ellipse cx="237.5" cy="257" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M239.8438,252.6719 C238.9063,252.2344 238.3125,252.0938 237.4375,252.0938 C234.8125,252.0938 232.8125,254.1719 232.8125,256.8906 L232.8125,258.0156 C232.8125,260.5938 234.9219,262.4844 237.8125,262.4844 C239.0313,262.4844 240.1875,262.1875 240.9375,261.6406 C241.5156,261.2344 241.8438,260.7813 241.8438,260.3906 C241.8438,259.9375 241.4531,259.5469 240.9844,259.5469 C240.7656,259.5469 240.5625,259.625 240.375,259.8125 C239.9219,260.2969 239.9219,260.2969 239.7344,260.3906 C239.3125,260.6563 238.625,260.7813 237.8594,260.7813 C235.8125,260.7813 234.5156,259.6875 234.5156,257.9844 L234.5156,256.8906 C234.5156,255.1094 235.7656,253.7969 237.5,253.7969 C238.0781,253.7969 238.6875,253.9531 239.1563,254.2031 C239.6406,254.4844 239.8125,254.7031 239.9063,255.1094 C239.9688,255.5156 240,255.6406 240.1406,255.7656 C240.2813,255.9063 240.5156,256.0156 240.7344,256.0156 C241,256.0156 241.2656,255.875 241.4375,255.6563 C241.5469,255.5 241.5781,255.3125 241.5781,254.8906 L241.5781,253.4688 C241.5781,253.0313 241.5625,252.9063 241.4688,252.75 C241.3125,252.4844 241.0313,252.3438 240.7344,252.3438 C240.4375,252.3438 240.2344,252.4375 240.0156,252.75 L239.8438,252.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="285" x="251.5" y="261.8467">HttpSessionSecurityContextRepository</text><line style="stroke:#181818;stroke-width:0.5;" x1="223.5" x2="538.5" y1="273" y2="273"/><line style="stroke:#181818;stroke-width:0.5;" x1="223.5" x2="538.5" y1="281" y2="281"/></g><g id="elem_GMN53185"><path d="M6,127.5 L6,152.6328 A0,0 0 0 0 6,152.6328 L260,152.6328 A0,0 0 0 0 260,152.6328 L260,145.5 L295.487,140 L260,137.5 L260,137.5 L250,127.5 L6,127.5 A0,0 0 0 0 6,127.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M250,127.5 L250,137.5 L260,137.5 L250,127.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="12" y="144.5669">通过http session关联SecurityContext</text></g><!--MD5=[434a86a25993eeeea880c43cffc3083d]
class SecurityContextHolder--><g id="elem_SecurityContextHolder"><rect codeLine="11" fill="#F1F1F1" height="48" id="SecurityContextHolder" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="962.5" y="7"/><ellipse cx="977.5" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M979.8438,18.6719 C978.9063,18.2344 978.3125,18.0938 977.4375,18.0938 C974.8125,18.0938 972.8125,20.1719 972.8125,22.8906 L972.8125,24.0156 C972.8125,26.5938 974.9219,28.4844 977.8125,28.4844 C979.0313,28.4844 980.1875,28.1875 980.9375,27.6406 C981.5156,27.2344 981.8438,26.7813 981.8438,26.3906 C981.8438,25.9375 981.4531,25.5469 980.9844,25.5469 C980.7656,25.5469 980.5625,25.625 980.375,25.8125 C979.9219,26.2969 979.9219,26.2969 979.7344,26.3906 C979.3125,26.6563 978.625,26.7813 977.8594,26.7813 C975.8125,26.7813 974.5156,25.6875 974.5156,23.9844 L974.5156,22.8906 C974.5156,21.1094 975.7656,19.7969 977.5,19.7969 C978.0781,19.7969 978.6875,19.9531 979.1563,20.2031 C979.6406,20.4844 979.8125,20.7031 979.9063,21.1094 C979.9688,21.5156 980,21.6406 980.1406,21.7656 C980.2813,21.9063 980.5156,22.0156 980.7344,22.0156 C981,22.0156 981.2656,21.875 981.4375,21.6563 C981.5469,21.5 981.5781,21.3125 981.5781,20.8906 L981.5781,19.4688 C981.5781,19.0313 981.5625,18.9063 981.4688,18.75 C981.3125,18.4844 981.0313,18.3438 980.7344,18.3438 C980.4375,18.3438 980.2344,18.4375 980.0156,18.75 L979.8438,18.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="991.5" y="27.8467">SecurityContextHolder</text><line style="stroke:#181818;stroke-width:0.5;" x1="963.5" x2="1158.5" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="963.5" x2="1158.5" y1="47" y2="47"/></g><g id="elem_M1"><path d="M601,127.5 L601,152.6328 L855,152.6328 L855,137.5 L845,127.5 L601,127.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M845,127.5 L845,137.5 L855,137.5 L845,127.5 " fill="#FEFFDD" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="233" x="607" y="144.5669">对当前请求的SecurityContext进行代理</text></g><!--MD5=[be780c5fb7e3c3d02d75cf2b549e3215]
class SecurityContextHolderStrategy--><g id="elem_SecurityContextHolderStrategy"><rect codeLine="16" fill="#F1F1F1" height="48" id="SecurityContextHolderStrategy" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="253" x="1142.5" y="116"/><ellipse cx="1157.5" cy="132" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1158.4531,128.7813 L1160.1719,128.7813 C1160.5625,128.7813 1160.75,128.75 1160.875,128.6719 C1161.1406,128.5156 1161.2813,128.2344 1161.2813,127.9375 C1161.2813,127.6719 1161.1719,127.4063 1160.9375,127.2344 C1160.7656,127.125 1160.625,127.0938 1160.1719,127.0938 L1155.0313,127.0938 C1154.5938,127.0938 1154.4688,127.1094 1154.3125,127.2031 C1154.0625,127.3594 1153.9063,127.6563 1153.9063,127.9375 C1153.9063,128.2188 1154.0469,128.4688 1154.2656,128.6406 C1154.4219,128.75 1154.6094,128.7813 1155.0313,128.7813 L1156.75,128.7813 L1156.75,135.2969 L1155.0313,135.2969 C1154.5938,135.2969 1154.4688,135.3125 1154.3125,135.4219 C1154.0625,135.5781 1153.9063,135.8594 1153.9063,136.1563 C1153.9063,136.4063 1154.0469,136.6719 1154.2656,136.8281 C1154.4219,136.9531 1154.625,137 1155.0313,137 L1160.1719,137 C1160.9219,137 1161.2813,136.7188 1161.2813,136.1563 C1161.2813,135.875 1161.1719,135.625 1160.9375,135.4531 C1160.7656,135.3281 1160.625,135.2969 1160.1719,135.2969 L1158.4531,135.2969 L1158.4531,128.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="221" x="1171.5" y="136.8467">SecurityContextHolderStrategy</text><line style="stroke:#181818;stroke-width:0.5;" x1="1143.5" x2="1394.5" y1="148" y2="148"/><line style="stroke:#181818;stroke-width:0.5;" x1="1143.5" x2="1394.5" y1="156" y2="156"/></g><g id="elem_GMN53194"><path d="M914.5,120 L914.5,160.2656 A0,0 0 0 0 914.5,160.2656 L1107.5,160.2656 A0,0 0 0 0 1107.5,160.2656 L1107.5,144 L1142.39,140 L1107.5,136 L1107.5,130 L1097.5,120 L914.5,120 A0,0 0 0 0 914.5,120 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1097.5,120 L1097.5,130 L1107.5,130 L1097.5,120 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172" x="920.5" y="137.0669">SecurityContext的存储策略,</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="920.5" y="152.1997">默认为ThreadLocal</text></g><!--MD5=[7a03ac347b7eb35ecfc2fc99aff3260a]
class GlobalSecurityContextHolderStrategy--><g id="elem_GlobalSecurityContextHolderStrategy"><rect codeLine="21" fill="#F1F1F1" height="48" id="GlobalSecurityContextHolderStrategy" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="306" x="755" y="241"/><ellipse cx="770" cy="257" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M772.3438,252.6719 C771.4063,252.2344 770.8125,252.0938 769.9375,252.0938 C767.3125,252.0938 765.3125,254.1719 765.3125,256.8906 L765.3125,258.0156 C765.3125,260.5938 767.4219,262.4844 770.3125,262.4844 C771.5313,262.4844 772.6875,262.1875 773.4375,261.6406 C774.0156,261.2344 774.3438,260.7813 774.3438,260.3906 C774.3438,259.9375 773.9531,259.5469 773.4844,259.5469 C773.2656,259.5469 773.0625,259.625 772.875,259.8125 C772.4219,260.2969 772.4219,260.2969 772.2344,260.3906 C771.8125,260.6563 771.125,260.7813 770.3594,260.7813 C768.3125,260.7813 767.0156,259.6875 767.0156,257.9844 L767.0156,256.8906 C767.0156,255.1094 768.2656,253.7969 770,253.7969 C770.5781,253.7969 771.1875,253.9531 771.6563,254.2031 C772.1406,254.4844 772.3125,254.7031 772.4063,255.1094 C772.4688,255.5156 772.5,255.6406 772.6406,255.7656 C772.7813,255.9063 773.0156,256.0156 773.2344,256.0156 C773.5,256.0156 773.7656,255.875 773.9375,255.6563 C774.0469,255.5 774.0781,255.3125 774.0781,254.8906 L774.0781,253.4688 C774.0781,253.0313 774.0625,252.9063 773.9688,252.75 C773.8125,252.4844 773.5313,252.3438 773.2344,252.3438 C772.9375,252.3438 772.7344,252.4375 772.5156,252.75 L772.3438,252.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="274" x="784" y="261.8467">GlobalSecurityContextHolderStrategy</text><line style="stroke:#181818;stroke-width:0.5;" x1="756" x2="1060" y1="273" y2="273"/><line style="stroke:#181818;stroke-width:0.5;" x1="756" x2="1060" y1="281" y2="281"/></g><!--MD5=[032766fa7dbad1ac191509830aade588]
class InheritableThreadLocalSecurityContextHolderStrategy--><g id="elem_InheritableThreadLocalSecurityContextHolderStrategy"><rect codeLine="22" fill="#F1F1F1" height="48" id="InheritableThreadLocalSecurityContextHolderStrategy" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="426" x="1096" y="241"/><ellipse cx="1111" cy="257" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1113.3438,252.6719 C1112.4063,252.2344 1111.8125,252.0938 1110.9375,252.0938 C1108.3125,252.0938 1106.3125,254.1719 1106.3125,256.8906 L1106.3125,258.0156 C1106.3125,260.5938 1108.4219,262.4844 1111.3125,262.4844 C1112.5313,262.4844 1113.6875,262.1875 1114.4375,261.6406 C1115.0156,261.2344 1115.3438,260.7813 1115.3438,260.3906 C1115.3438,259.9375 1114.9531,259.5469 1114.4844,259.5469 C1114.2656,259.5469 1114.0625,259.625 1113.875,259.8125 C1113.4219,260.2969 1113.4219,260.2969 1113.2344,260.3906 C1112.8125,260.6563 1112.125,260.7813 1111.3594,260.7813 C1109.3125,260.7813 1108.0156,259.6875 1108.0156,257.9844 L1108.0156,256.8906 C1108.0156,255.1094 1109.2656,253.7969 1111,253.7969 C1111.5781,253.7969 1112.1875,253.9531 1112.6563,254.2031 C1113.1406,254.4844 1113.3125,254.7031 1113.4063,255.1094 C1113.4688,255.5156 1113.5,255.6406 1113.6406,255.7656 C1113.7813,255.9063 1114.0156,256.0156 1114.2344,256.0156 C1114.5,256.0156 1114.7656,255.875 1114.9375,255.6563 C1115.0469,255.5 1115.0781,255.3125 1115.0781,254.8906 L1115.0781,253.4688 C1115.0781,253.0313 1115.0625,252.9063 1114.9688,252.75 C1114.8125,252.4844 1114.5313,252.3438 1114.2344,252.3438 C1113.9375,252.3438 1113.7344,252.4375 1113.5156,252.75 L1113.3438,252.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="394" x="1125" y="261.8467">InheritableThreadLocalSecurityContextHolderStrategy</text><line style="stroke:#181818;stroke-width:0.5;" x1="1097" x2="1521" y1="273" y2="273"/><line style="stroke:#181818;stroke-width:0.5;" x1="1097" x2="1521" y1="281" y2="281"/></g><!--MD5=[bcc8d52e431d3d51980519b26057fde1]
class ThreadLocalSecurityContextHolderStrategy--><g id="elem_ThreadLocalSecurityContextHolderStrategy"><rect codeLine="23" fill="#F1F1F1" height="48" id="ThreadLocalSecurityContextHolderStrategy" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="347" x="1557.5" y="241"/><ellipse cx="1572.5" cy="257" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1574.8438,252.6719 C1573.9063,252.2344 1573.3125,252.0938 1572.4375,252.0938 C1569.8125,252.0938 1567.8125,254.1719 1567.8125,256.8906 L1567.8125,258.0156 C1567.8125,260.5938 1569.9219,262.4844 1572.8125,262.4844 C1574.0313,262.4844 1575.1875,262.1875 1575.9375,261.6406 C1576.5156,261.2344 1576.8438,260.7813 1576.8438,260.3906 C1576.8438,259.9375 1576.4531,259.5469 1575.9844,259.5469 C1575.7656,259.5469 1575.5625,259.625 1575.375,259.8125 C1574.9219,260.2969 1574.9219,260.2969 1574.7344,260.3906 C1574.3125,260.6563 1573.625,260.7813 1572.8594,260.7813 C1570.8125,260.7813 1569.5156,259.6875 1569.5156,257.9844 L1569.5156,256.8906 C1569.5156,255.1094 1570.7656,253.7969 1572.5,253.7969 C1573.0781,253.7969 1573.6875,253.9531 1574.1563,254.2031 C1574.6406,254.4844 1574.8125,254.7031 1574.9063,255.1094 C1574.9688,255.5156 1575,255.6406 1575.1406,255.7656 C1575.2813,255.9063 1575.5156,256.0156 1575.7344,256.0156 C1576,256.0156 1576.2656,255.875 1576.4375,255.6563 C1576.5469,255.5 1576.5781,255.3125 1576.5781,254.8906 L1576.5781,253.4688 C1576.5781,253.0313 1576.5625,252.9063 1576.4688,252.75 C1576.3125,252.4844 1576.0313,252.3438 1575.7344,252.3438 C1575.4375,252.3438 1575.2344,252.4375 1575.0156,252.75 L1574.8438,252.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="315" x="1586.5" y="261.8467">ThreadLocalSecurityContextHolderStrategy</text><line style="stroke:#181818;stroke-width:0.5;" x1="1558.5" x2="1903.5" y1="273" y2="273"/><line style="stroke:#181818;stroke-width:0.5;" x1="1558.5" x2="1903.5" y1="281" y2="281"/></g><!--MD5=[71892c67b0ff1cb845f0194e61e60f2e]
reverse link SecurityContextRepository to HttpSessionSecurityContextRepository--><g id="link_SecurityContextRepository_HttpSessionSecurityContextRepository"><path d="M397.288,183.864 C393.386,203.0596 388.941,224.9301 385.681,240.9684 " fill="none" id="SecurityContextRepository-backto-HttpSessionSecurityContextRepository" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="390.454,182.34,401.298,164.135,404.174,185.129,390.454,182.34" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[37d07bce3f1802e02386dbd6d9427d34]
link SecurityContextRepository to SecurityContext--><g id="link_SecurityContextRepository_SecurityContext"><path codeLine="9" d="M462.0185,169.59 C462.0185,169.59 551.63,215.3258 589.898,234.8565 " fill="none" id="SecurityContextRepository-SecurityContext" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="601.873,240.9684,595.6753,233.3141,597.4196,238.6953,592.0383,240.4396,601.873,240.9684" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="597.4196" x2="590.2935" y1="238.6953" y2="235.0587"/><polygon fill="#181818" points="451.33,164.135,454.8559,170.4253,462.0185,169.59,458.4926,163.2997,451.33,164.135" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26" x="542" y="207.0669">管理</text></g><!--MD5=[ae56cfd077aaad477c47b1c82d5b65bc]
link SecurityContextHolder to M1--><g id="link_SecurityContextHolder_M1"><path codeLine="13" d="M989.154,55.086 C919.749,77.387 817.487,110.246 763.845,127.482 " fill="none" id="SecurityContextHolder-M1" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[ebbb7c37604a30d39e2aeb3096bbea59]
link M1 to SecurityContext--><g id="link_M1_SecurityContext"><path codeLine="14" d="M720.233,152.794 C707.656,171.892 682.5,210.0922 665.212,236.3442 " fill="none" id="M1-to-SecurityContext" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="662.295,240.7743,670.5849,235.4566,665.0444,236.5981,663.9029,231.0576,662.295,240.7743" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[128144d96a9bd0bc9663f6c4a818020c]
reverse link SecurityContextHolderStrategy to GlobalSecurityContextHolderStrategy--><g id="link_SecurityContextHolderStrategy_GlobalSecurityContextHolderStrategy"><path d="M1182.16,170.589 C1118.74,192.196 1034,221.0707 975.597,240.9684 " fill="none" id="SecurityContextHolderStrategy-backto-GlobalSecurityContextHolderStrategy" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1179.91,163.96,1201.1,164.135,1184.42,177.212,1179.91,163.96" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[03364836ee6754ac724b9d3313278467]
reverse link SecurityContextHolderStrategy to InheritableThreadLocalSecurityContextHolderStrategy--><g id="link_SecurityContextHolderStrategy_InheritableThreadLocalSecurityContextHolderStrategy"><path d="M1282.74,183.249 C1289.03,202.5911 1296.24,224.7586 1301.51,240.9684 " fill="none" id="SecurityContextHolderStrategy-backto-InheritableThreadLocalSecurityContextHolderStrategy" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1276.05,185.32,1276.52,164.135,1289.37,180.99,1276.05,185.32" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[5eac4ed8ac12a7e818699eb5d1847ef6]
reverse link SecurityContextHolderStrategy to ThreadLocalSecurityContextHolderStrategy--><g id="link_SecurityContextHolderStrategy_ThreadLocalSecurityContextHolderStrategy"><path d="M1375.17,169.267 C1456.79,190.9957 1568.12,220.6349 1644.39,240.9408 " fill="none" id="SecurityContextHolderStrategy-backto-ThreadLocalSecurityContextHolderStrategy" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="1373.15,175.973,1355.63,164.063,1376.76,162.444,1373.15,175.973" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[c2c61623dd30c7705779b8791b568f97]
link SecurityContextHolder to SecurityContextHolderStrategy--><g id="link_SecurityContextHolder_SecurityContextHolderStrategy"><path codeLine="24" d="M1105.88,55.086 C1140.87,73.086 1189.23,97.966 1224.2,115.956 " fill="none" id="SecurityContextHolder-SecurityContextHolderStrategy" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[95f27ee902713e6b5fbe721ec36af134]
@startuml
interface SecurityContext

interface SecurityContextRepository
class HttpSessionSecurityContextRepository implements SecurityContextRepository
note left
通过http session关联SecurityContext
end note

SecurityContextRepository *- -> SecurityContext: 管理

class SecurityContextHolder
note "对当前请求的SecurityContext进行代理" as M1
SecurityContextHolder - - M1
M1 - -> SecurityContext

interface SecurityContextHolderStrategy
note left
SecurityContext的存储策略,
默认为ThreadLocal
end note
class GlobalSecurityContextHolderStrategy implements SecurityContextHolderStrategy
class InheritableThreadLocalSecurityContextHolderStrategy implements SecurityContextHolderStrategy
class ThreadLocalSecurityContextHolderStrategy implements SecurityContextHolderStrategy
SecurityContextHolder - - SecurityContextHolderStrategy
@enduml

PlantUML version 1.2022.2(Sat Mar 05 16:30:19 UTC 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>

<p>在请求处理的过程中, 可以通过SecurityContextHolder来获取SecurityContext,<br>SecurityContext中包含了Authentication信息.</p>
<p><img src="/2021/01/spring-security/architecture/SecurityContext.png"></p>
<p>SecurityContextHolder默认将SecurityContext保存在ThreadLocal中</p>
<h3 id="LogoutFilter"><a href="#LogoutFilter" class="headerlink" title="LogoutFilter"></a>LogoutFilter</h3><p>处理用户的登出请求, 通过LogoutHandler实例对相关的数据进行清理,<br>成功清理完成后调用LogoutSuccessHandler</p>
<h3 id="AuthenticationFilter"><a href="#AuthenticationFilter" class="headerlink" title="AuthenticationFilter"></a>AuthenticationFilter</h3><p>Authentication描述登录的认证输入信息,<br>通过校验认证输入信息, 得到认证成功后的Authentication信息.<br>认证成功后的Authentication会被保存在SecurityContext中.</p>
<p>详情会在认证章节进行讨论.</p>
<h3 id="SessionManagementFilter"><a href="#SessionManagementFilter" class="headerlink" title="SessionManagementFilter"></a>SessionManagementFilter</h3><p>对刚刚认证通过的用户进行session校验, 主要针对同时登录数之类的检查.</p>
<p>详情会在Session章节进行讨论.</p>
<h3 id="ExceptionTranslationFilter"><a href="#ExceptionTranslationFilter" class="headerlink" title="ExceptionTranslationFilter"></a>ExceptionTranslationFilter</h3><p>Spring Security中的全局异常处理,<br>用于对ExceptionTranslationFilter之后的所有Filter产生的<br>AccessDeniedException和AuthenticationException进行捕获处理.</p>
<p><img src="/2021/01/spring-security/architecture/spring-security-excepton-handle.png"></p>
<h3 id="FilterSecurityInterceptor"><a href="#FilterSecurityInterceptor" class="headerlink" title="FilterSecurityInterceptor"></a>FilterSecurityInterceptor</h3><p>根据<strong>在SecurityFilterChain中预先配置</strong>的鉴权信息, 对当前请求进行校验.</p>
<p><img src="/2021/01/spring-security/architecture/filtersecurityinterceptor.png"></p>
<p>详情会在认证章节进行讨论.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://spring.io/guides/topicals/spring-security-architecture">Spring Security Architecture</a></li>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-security/site/docs/current/reference/html5/">Spring Security Reference</a></li>
</ul>

    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2021/02/spring-security/authentication/" rel="bookmark">Spring Security --- Authentication</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2021/08/spring-security/authorization/" rel="bookmark">Spring Security --- Authorization</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2018/05/spring/request-workflow/" rel="bookmark">Spring --- 请求处理流程</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2022/03/spring/spring-mvc/" rel="bookmark">Spring MVC RESTfull请求处理流程</a></div>
    </li>
  </ul>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Amos
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://amos.s2u2m.com/2021/01/spring-security/architecture/" title="Spring Security --- Architecture">https://amos.s2u2m.com/2021/01/spring-security/architecture/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-Hans" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Spring/" rel="tag"># Spring</a>
              <a href="/tags/Spring-Security/" rel="tag"># Spring Security</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2020/08/big-data/airflow/airflow-introduction/" rel="prev" title="Airflow介绍">
      <i class="fa fa-chevron-left"></i> Airflow介绍
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/02/spring-security/authentication/" rel="next" title="Spring Security --- Authentication">
      Spring Security --- Authentication <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%8CSpring%E7%9A%84%E9%9B%86%E6%88%90"><span class="nav-number">1.</span> <span class="nav-text">同Spring的集成</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="nav-number">2.</span> <span class="nav-text">过滤器链的设计</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%80%8E%E6%A0%B7%E9%85%8D%E7%BD%AE%E8%BF%87%E6%BB%A4%E5%99%A8%E9%93%BE"><span class="nav-number">3.</span> <span class="nav-text">怎样配置过滤器链</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%A0%B8%E5%BF%83%E7%9A%84%E8%BF%87%E6%BB%A4%E5%99%A8%E4%BB%8B%E7%BB%8D"><span class="nav-number">4.</span> <span class="nav-text">核心的过滤器介绍</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SecurityContextPersistenceFilter"><span class="nav-number">4.1.</span> <span class="nav-text">SecurityContextPersistenceFilter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LogoutFilter"><span class="nav-number">4.2.</span> <span class="nav-text">LogoutFilter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AuthenticationFilter"><span class="nav-number">4.3.</span> <span class="nav-text">AuthenticationFilter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SessionManagementFilter"><span class="nav-number">4.4.</span> <span class="nav-text">SessionManagementFilter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ExceptionTranslationFilter"><span class="nav-number">4.5.</span> <span class="nav-text">ExceptionTranslationFilter</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FilterSecurityInterceptor"><span class="nav-number">4.6.</span> <span class="nav-text">FilterSecurityInterceptor</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">5.</span> <span class="nav-text">Reference</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Amos"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Amos</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:xiayy860612@126.com" title="E-Mail → mailto:xiayy860612@126.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/xiayy860612" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiayy860612" rel="noopener" target="_blank"><i class="fa fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-Hans" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">蜀ICP备18013492号 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">s2u2m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">33k</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('https://unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'YnmrykAQHQwGzUR77I61DkKN-9Nh9j0Va',
      appKey     : '4TzKa97Pz2JTg81B8o5l77mO',
      placeholder: "一起来聊一聊呗",
      avatar     : 'retro',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
