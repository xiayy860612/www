<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"amos.s2u2m.com","root":"/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="Spring Security的认证设计">
<meta property="og:type" content="article">
<meta property="og:title" content="Spring Security --- Authentication">
<meta property="og:url" content="https://amos.s2u2m.com/2021/02/spring-security/authentication/index.html">
<meta property="og:site_name" content="观澜">
<meta property="og:description" content="Spring Security的认证设计">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://amos.s2u2m.com/2021/02/spring-security/authentication/abstractauthenticationprocessingfilter.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/02/spring-security/authentication/SecurityContext.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/02/spring-security/authentication/providermanagers-parent.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/02/spring-security/authentication/loginurlauthenticationentrypoint.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/02/spring-security/authentication/usernamepasswordauthenticationfilter.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/02/spring-security/authentication/basicauthenticationentrypoint.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/02/spring-security/authentication/basicauthenticationfilter.png">
<meta property="og:image" content="https://amos.s2u2m.com/2021/02/spring-security/authentication/daoauthenticationprovider.png">
<meta property="article:published_time" content="2021-02-08T07:36:54.000Z">
<meta property="article:modified_time" content="2021-12-24T05:38:15.767Z">
<meta property="article:author" content="Amos">
<meta property="article:tag" content="Spring Security">
<meta property="article:tag" content="Spring">
<meta property="article:tag" content="认证">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://amos.s2u2m.com/2021/02/spring-security/authentication/abstractauthenticationprocessingfilter.png">

<link rel="canonical" href="https://amos.s2u2m.com/2021/02/spring-security/authentication/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>Spring Security --- Authentication | 观澜</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">观澜</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">行到水穷处，坐看云起时</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://amos.s2u2m.com/2021/02/spring-security/authentication/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpeg">
      <meta itemprop="name" content="Amos">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="观澜">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          Spring Security --- Authentication
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-02-08 15:36:54" itemprop="dateCreated datePublished" datetime="2021-02-08T15:36:54+08:00">2021-02-08</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-12-24 13:38:15" itemprop="dateModified" datetime="2021-12-24T13:38:15+08:00">2021-12-24</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Spring-Security/" itemprop="url" rel="index"><span itemprop="name">Spring Security</span></a>
                </span>
            </span>

          
            <span id="/2021/02/spring-security/authentication/" class="post-meta-item leancloud_visitors" data-flag-title="Spring Security --- Authentication" title="阅读次数">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">阅读次数：</span>
              <span class="leancloud-visitors-count"></span>
            </span>
  
  <span class="post-meta-item">
    
      <span class="post-meta-item-icon">
        <i class="far fa-comment"></i>
      </span>
      <span class="post-meta-item-text">Valine：</span>
    
    <a title="valine" href="/2021/02/spring-security/authentication/#valine-comments" itemprop="discussionUrl">
      <span class="post-comments-count valine-comment-count" data-xid="/2021/02/spring-security/authentication/" itemprop="commentCount"></span>
    </a>
  </span>
  
  <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>3.4k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>3 分钟</span>
            </span>
            <div class="post-description">Spring Security的认证设计</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h2 id="Authentication设计"><a href="#Authentication设计" class="headerlink" title="Authentication设计"></a>Authentication设计</h2><h3 id="认证处理流程"><a href="#认证处理流程" class="headerlink" title="认证处理流程"></a>认证处理流程</h3><p><img src="/2021/02/spring-security/authentication/abstractauthenticationprocessingfilter.png" alt="认证处理流程"></p>
<ul>
<li>SecurityContextHolder, 认证成功后, 可以在后续的处理中通过它来获取认证后的用户信息</li>
</ul>
<p><img src="/2021/02/spring-security/authentication/SecurityContext.png"></p>
<h3 id="认证的设计"><a href="#认证的设计" class="headerlink" title="认证的设计"></a>认证的设计</h3><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="846px" preserveAspectRatio="none" style="width:702px;height:846px;background:#FFFFFF;" version="1.1" viewBox="0 0 702 846" width="702px" zoomAndPan="magnify"><defs/><g><!--MD5=[a139e992f8a77546bf37c14edd197f06]
class Authentication--><g id="elem_Authentication"><rect codeLine="1" fill="#F1F1F1" height="113.1875" id="Authentication" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="505" x="98.5" y="241"/><ellipse cx="294.75" cy="257" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M295.7031,253.7813 L297.4219,253.7813 C297.8125,253.7813 298,253.75 298.125,253.6719 C298.3906,253.5156 298.5313,253.2344 298.5313,252.9375 C298.5313,252.6719 298.4219,252.4063 298.1875,252.2344 C298.0156,252.125 297.875,252.0938 297.4219,252.0938 L292.2813,252.0938 C291.8438,252.0938 291.7188,252.1094 291.5625,252.2031 C291.3125,252.3594 291.1563,252.6563 291.1563,252.9375 C291.1563,253.2188 291.2969,253.4688 291.5156,253.6406 C291.6719,253.75 291.8594,253.7813 292.2813,253.7813 L294,253.7813 L294,260.2969 L292.2813,260.2969 C291.8438,260.2969 291.7188,260.3125 291.5625,260.4219 C291.3125,260.5781 291.1563,260.8594 291.1563,261.1563 C291.1563,261.4063 291.2969,261.6719 291.5156,261.8281 C291.6719,261.9531 291.875,262 292.2813,262 L297.4219,262 C298.1719,262 298.5313,261.7188 298.5313,261.1563 C298.5313,260.875 298.4219,260.625 298.1875,260.4531 C298.0156,260.3281 297.875,260.2969 297.4219,260.2969 L295.7031,260.2969 L295.7031,253.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="104" x="315.25" y="261.8467">Authentication</text><line style="stroke:#181818;stroke-width:0.5;" x1="99.5" x2="602.5" y1="273" y2="273"/><line style="stroke:#181818;stroke-width:0.5;" x1="99.5" x2="602.5" y1="281" y2="281"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="493" x="104.5" y="297.9951">Collection&lt;? extends GrantedAuthority&gt; getAuthorities(); // 权限信息</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="277" x="104.5" y="314.292">Object getCredentials(); // 用户校验信息</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143" x="104.5" y="330.5889">Object getDetails();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="257" x="104.5" y="346.8857">Object getPrincipal(); // 用户标识信息</text></g><!--MD5=[9ec87d94fbb51db69175d879cdc53157]
class AbstractAuthenticationProcessingFilter--><g id="elem_AbstractAuthenticationProcessingFilter"><rect codeLine="7" fill="#F1F1F1" height="48" id="AbstractAuthenticationProcessingFilter" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="307" x="85.5" y="116"/><ellipse cx="100.5" cy="132" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M102.5781,133.8125 L102.9688,134.7969 L102.5781,134.7969 C102.125,134.7969 102.0156,134.8125 101.8594,134.9219 C101.6094,135.0781 101.4531,135.3594 101.4531,135.6563 C101.4531,135.9219 101.5938,136.1719 101.8125,136.3281 C101.9531,136.4531 102.1563,136.5 102.5781,136.5 L104.9375,136.5 C105.2969,136.5 105.5156,136.4688 105.6563,136.375 C105.9063,136.2344 106.0625,135.9375 106.0625,135.6563 C106.0625,135.375 105.9219,135.125 105.7031,134.9688 C105.5313,134.8281 105.375,134.7969 104.9063,134.7969 L101.5156,126.5938 L97.8438,126.5938 C97.3906,126.5938 97.2656,126.6094 97.1094,126.7031 C96.8594,126.875 96.7031,127.1563 96.7031,127.4375 C96.7031,127.7188 96.8438,127.9688 97.0625,128.1406 C97.2344,128.25 97.4063,128.2813 97.8438,128.2813 L98.9219,128.2813 L96.2813,134.7969 C95.8594,134.7969 95.7031,134.8125 95.5469,134.9219 C95.2969,135.0781 95.1406,135.3594 95.1406,135.6563 C95.1406,136.2188 95.5156,136.5 96.2656,136.5 L98.5313,136.5 C98.8906,136.5 99.1094,136.4688 99.2344,136.375 C99.5,136.2344 99.6406,135.9375 99.6406,135.6563 C99.6406,135.375 99.5156,135.125 99.2969,134.9531 C99.125,134.8281 98.9844,134.7969 98.5313,134.7969 L98.1406,134.7969 L98.5313,133.8125 L102.5781,133.8125 Z M101.875,132.1094 L99.2031,132.1094 L100.5469,128.8438 L101.875,132.1094 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="275" x="114.5" y="136.8467">AbstractAuthenticationProcessingFilter</text><line style="stroke:#181818;stroke-width:0.5;" x1="86.5" x2="391.5" y1="148" y2="148"/><line style="stroke:#181818;stroke-width:0.5;" x1="86.5" x2="391.5" y1="156" y2="156"/></g><!--MD5=[eaceba59a068e045d0f40484b37c2e3f]
class AuthenticationManager--><g id="elem_AuthenticationManager"><rect codeLine="11" fill="#F1F1F1" height="48" id="AuthenticationManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="199" x="251.5" y="431"/><ellipse cx="266.5" cy="447" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M267.4531,443.7813 L269.1719,443.7813 C269.5625,443.7813 269.75,443.75 269.875,443.6719 C270.1406,443.5156 270.2813,443.2344 270.2813,442.9375 C270.2813,442.6719 270.1719,442.4063 269.9375,442.2344 C269.7656,442.125 269.625,442.0938 269.1719,442.0938 L264.0313,442.0938 C263.5938,442.0938 263.4688,442.1094 263.3125,442.2031 C263.0625,442.3594 262.9063,442.6563 262.9063,442.9375 C262.9063,443.2188 263.0469,443.4688 263.2656,443.6406 C263.4219,443.75 263.6094,443.7813 264.0313,443.7813 L265.75,443.7813 L265.75,450.2969 L264.0313,450.2969 C263.5938,450.2969 263.4688,450.3125 263.3125,450.4219 C263.0625,450.5781 262.9063,450.8594 262.9063,451.1563 C262.9063,451.4063 263.0469,451.6719 263.2656,451.8281 C263.4219,451.9531 263.625,452 264.0313,452 L269.1719,452 C269.9219,452 270.2813,451.7188 270.2813,451.1563 C270.2813,450.875 270.1719,450.625 269.9375,450.4531 C269.7656,450.3281 269.625,450.2969 269.1719,450.2969 L267.4531,450.2969 L267.4531,443.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="167" x="280.5" y="451.8467">AuthenticationManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="252.5" x2="449.5" y1="463" y2="463"/><line style="stroke:#181818;stroke-width:0.5;" x1="252.5" x2="449.5" y1="471" y2="471"/></g><!--MD5=[52de2a8bba1e55f410541bc5f0542349]
class ProviderManager--><g id="elem_ProviderManager"><rect codeLine="12" fill="#F1F1F1" height="48" id="ProviderManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="153" x="274.5" y="540"/><ellipse cx="289.5" cy="556" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M291.8438,551.6719 C290.9063,551.2344 290.3125,551.0938 289.4375,551.0938 C286.8125,551.0938 284.8125,553.1719 284.8125,555.8906 L284.8125,557.0156 C284.8125,559.5938 286.9219,561.4844 289.8125,561.4844 C291.0313,561.4844 292.1875,561.1875 292.9375,560.6406 C293.5156,560.2344 293.8438,559.7813 293.8438,559.3906 C293.8438,558.9375 293.4531,558.5469 292.9844,558.5469 C292.7656,558.5469 292.5625,558.625 292.375,558.8125 C291.9219,559.2969 291.9219,559.2969 291.7344,559.3906 C291.3125,559.6563 290.625,559.7813 289.8594,559.7813 C287.8125,559.7813 286.5156,558.6875 286.5156,556.9844 L286.5156,555.8906 C286.5156,554.1094 287.7656,552.7969 289.5,552.7969 C290.0781,552.7969 290.6875,552.9531 291.1563,553.2031 C291.6406,553.4844 291.8125,553.7031 291.9063,554.1094 C291.9688,554.5156 292,554.6406 292.1406,554.7656 C292.2813,554.9063 292.5156,555.0156 292.7344,555.0156 C293,555.0156 293.2656,554.875 293.4375,554.6563 C293.5469,554.5 293.5781,554.3125 293.5781,553.8906 L293.5781,552.4688 C293.5781,552.0313 293.5625,551.9063 293.4688,551.75 C293.3125,551.4844 293.0313,551.3438 292.7344,551.3438 C292.4375,551.3438 292.2344,551.4375 292.0156,551.75 L291.8438,551.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121" x="303.5" y="560.8467">ProviderManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="275.5" x2="426.5" y1="572" y2="572"/><line style="stroke:#181818;stroke-width:0.5;" x1="275.5" x2="426.5" y1="580" y2="580"/></g><!--MD5=[f074fdee743888442a4f97901e556f9c]
class AuthenticationProvider--><g id="elem_AuthenticationProvider"><rect codeLine="13" fill="#F1F1F1" height="80.5938" id="AuthenticationProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="688" x="7" y="649"/><ellipse cx="265.25" cy="665" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M266.2031,661.7813 L267.9219,661.7813 C268.3125,661.7813 268.5,661.75 268.625,661.6719 C268.8906,661.5156 269.0313,661.2344 269.0313,660.9375 C269.0313,660.6719 268.9219,660.4063 268.6875,660.2344 C268.5156,660.125 268.375,660.0938 267.9219,660.0938 L262.7813,660.0938 C262.3438,660.0938 262.2188,660.1094 262.0625,660.2031 C261.8125,660.3594 261.6563,660.6563 261.6563,660.9375 C261.6563,661.2188 261.7969,661.4688 262.0156,661.6406 C262.1719,661.75 262.3594,661.7813 262.7813,661.7813 L264.5,661.7813 L264.5,668.2969 L262.7813,668.2969 C262.3438,668.2969 262.2188,668.3125 262.0625,668.4219 C261.8125,668.5781 261.6563,668.8594 261.6563,669.1563 C261.6563,669.4063 261.7969,669.6719 262.0156,669.8281 C262.1719,669.9531 262.375,670 262.7813,670 L267.9219,670 C268.6719,670 269.0313,669.7188 269.0313,669.1563 C269.0313,668.875 268.9219,668.625 268.6875,668.4531 C268.5156,668.3281 268.375,668.2969 267.9219,668.2969 L266.2031,668.2969 L266.2031,661.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="163" x="285.75" y="669.8467">AuthenticationProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="694" y1="681" y2="681"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="694" y1="689" y2="689"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="676" x="13" y="705.9951">Authentication authenticate(Authentication authentication) throws AuthenticationException;</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="316" x="13" y="722.292">boolean supports(Class&lt;?&gt; authentication);</text></g><!--MD5=[3e6b436126ba7aa842e4929fc17143d3]
class DaoAuthenticationProvider--><g id="elem_DaoAuthenticationProvider"><rect codeLine="18" fill="#F1F1F1" height="48" id="DaoAuthenticationProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="228" x="107" y="791"/><ellipse cx="122" cy="807" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M124.3438,802.6719 C123.4063,802.2344 122.8125,802.0938 121.9375,802.0938 C119.3125,802.0938 117.3125,804.1719 117.3125,806.8906 L117.3125,808.0156 C117.3125,810.5938 119.4219,812.4844 122.3125,812.4844 C123.5313,812.4844 124.6875,812.1875 125.4375,811.6406 C126.0156,811.2344 126.3438,810.7813 126.3438,810.3906 C126.3438,809.9375 125.9531,809.5469 125.4844,809.5469 C125.2656,809.5469 125.0625,809.625 124.875,809.8125 C124.4219,810.2969 124.4219,810.2969 124.2344,810.3906 C123.8125,810.6563 123.125,810.7813 122.3594,810.7813 C120.3125,810.7813 119.0156,809.6875 119.0156,807.9844 L119.0156,806.8906 C119.0156,805.1094 120.2656,803.7969 122,803.7969 C122.5781,803.7969 123.1875,803.9531 123.6563,804.2031 C124.1406,804.4844 124.3125,804.7031 124.4063,805.1094 C124.4688,805.5156 124.5,805.6406 124.6406,805.7656 C124.7813,805.9063 125.0156,806.0156 125.2344,806.0156 C125.5,806.0156 125.7656,805.875 125.9375,805.6563 C126.0469,805.5 126.0781,805.3125 126.0781,804.8906 L126.0781,803.4688 C126.0781,803.0313 126.0625,802.9063 125.9688,802.75 C125.8125,802.4844 125.5313,802.3438 125.2344,802.3438 C124.9375,802.3438 124.7344,802.4375 124.5156,802.75 L124.3438,802.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="136" y="811.8467">DaoAuthenticationProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="108" x2="334" y1="823" y2="823"/><line style="stroke:#181818;stroke-width:0.5;" x1="108" x2="334" y1="831" y2="831"/></g><!--MD5=[b136bb2a7838eae0b91cfe262134d939]
class JwtAuthenticationProvider--><g id="elem_JwtAuthenticationProvider"><rect codeLine="19" fill="#F1F1F1" height="48" id="JwtAuthenticationProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="222" x="370" y="791"/><ellipse cx="385" cy="807" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M387.3438,802.6719 C386.4063,802.2344 385.8125,802.0938 384.9375,802.0938 C382.3125,802.0938 380.3125,804.1719 380.3125,806.8906 L380.3125,808.0156 C380.3125,810.5938 382.4219,812.4844 385.3125,812.4844 C386.5313,812.4844 387.6875,812.1875 388.4375,811.6406 C389.0156,811.2344 389.3438,810.7813 389.3438,810.3906 C389.3438,809.9375 388.9531,809.5469 388.4844,809.5469 C388.2656,809.5469 388.0625,809.625 387.875,809.8125 C387.4219,810.2969 387.4219,810.2969 387.2344,810.3906 C386.8125,810.6563 386.125,810.7813 385.3594,810.7813 C383.3125,810.7813 382.0156,809.6875 382.0156,807.9844 L382.0156,806.8906 C382.0156,805.1094 383.2656,803.7969 385,803.7969 C385.5781,803.7969 386.1875,803.9531 386.6563,804.2031 C387.1406,804.4844 387.3125,804.7031 387.4063,805.1094 C387.4688,805.5156 387.5,805.6406 387.6406,805.7656 C387.7813,805.9063 388.0156,806.0156 388.2344,806.0156 C388.5,806.0156 388.7656,805.875 388.9375,805.6563 C389.0469,805.5 389.0781,805.3125 389.0781,804.8906 L389.0781,803.4688 C389.0781,803.0313 389.0625,802.9063 388.9688,802.75 C388.8125,802.4844 388.5313,802.3438 388.2344,802.3438 C387.9375,802.3438 387.7344,802.4375 387.5156,802.75 L387.3438,802.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="190" x="399" y="811.8467">JwtAuthenticationProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="371" x2="591" y1="823" y2="823"/><line style="stroke:#181818;stroke-width:0.5;" x1="371" x2="591" y1="831" y2="831"/></g><!--MD5=[86b30c3e0fe779331a576db045bd0856]
class SecurityContext--><g id="elem_SecurityContext"><rect codeLine="24" fill="#F1F1F1" height="48" id="SecurityContext" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="145" x="427.5" y="116"/><ellipse cx="442.5" cy="132" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M443.4531,128.7813 L445.1719,128.7813 C445.5625,128.7813 445.75,128.75 445.875,128.6719 C446.1406,128.5156 446.2813,128.2344 446.2813,127.9375 C446.2813,127.6719 446.1719,127.4063 445.9375,127.2344 C445.7656,127.125 445.625,127.0938 445.1719,127.0938 L440.0313,127.0938 C439.5938,127.0938 439.4688,127.1094 439.3125,127.2031 C439.0625,127.3594 438.9063,127.6563 438.9063,127.9375 C438.9063,128.2188 439.0469,128.4688 439.2656,128.6406 C439.4219,128.75 439.6094,128.7813 440.0313,128.7813 L441.75,128.7813 L441.75,135.2969 L440.0313,135.2969 C439.5938,135.2969 439.4688,135.3125 439.3125,135.4219 C439.0625,135.5781 438.9063,135.8594 438.9063,136.1563 C438.9063,136.4063 439.0469,136.6719 439.2656,136.8281 C439.4219,136.9531 439.625,137 440.0313,137 L445.1719,137 C445.9219,137 446.2813,136.7188 446.2813,136.1563 C446.2813,135.875 446.1719,135.625 445.9375,135.4531 C445.7656,135.3281 445.625,135.2969 445.1719,135.2969 L443.4531,135.2969 L443.4531,128.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="113" x="456.5" y="136.8467">SecurityContext</text><line style="stroke:#181818;stroke-width:0.5;" x1="428.5" x2="571.5" y1="148" y2="148"/><line style="stroke:#181818;stroke-width:0.5;" x1="428.5" x2="571.5" y1="156" y2="156"/></g><!--MD5=[434a86a25993eeeea880c43cffc3083d]
class SecurityContextHolder--><g id="elem_SecurityContextHolder"><rect codeLine="25" fill="#F1F1F1" height="48" id="SecurityContextHolder" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="197" x="401.5" y="7"/><ellipse cx="416.5" cy="23" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M418.8438,18.6719 C417.9063,18.2344 417.3125,18.0938 416.4375,18.0938 C413.8125,18.0938 411.8125,20.1719 411.8125,22.8906 L411.8125,24.0156 C411.8125,26.5938 413.9219,28.4844 416.8125,28.4844 C418.0313,28.4844 419.1875,28.1875 419.9375,27.6406 C420.5156,27.2344 420.8438,26.7813 420.8438,26.3906 C420.8438,25.9375 420.4531,25.5469 419.9844,25.5469 C419.7656,25.5469 419.5625,25.625 419.375,25.8125 C418.9219,26.2969 418.9219,26.2969 418.7344,26.3906 C418.3125,26.6563 417.625,26.7813 416.8594,26.7813 C414.8125,26.7813 413.5156,25.6875 413.5156,23.9844 L413.5156,22.8906 C413.5156,21.1094 414.7656,19.7969 416.5,19.7969 C417.0781,19.7969 417.6875,19.9531 418.1563,20.2031 C418.6406,20.4844 418.8125,20.7031 418.9063,21.1094 C418.9688,21.5156 419,21.6406 419.1406,21.7656 C419.2813,21.9063 419.5156,22.0156 419.7344,22.0156 C420,22.0156 420.2656,21.875 420.4375,21.6563 C420.5469,21.5 420.5781,21.3125 420.5781,20.8906 L420.5781,19.4688 C420.5781,19.0313 420.5625,18.9063 420.4688,18.75 C420.3125,18.4844 420.0313,18.3438 419.7344,18.3438 C419.4375,18.3438 419.2344,18.4375 419.0156,18.75 L418.8438,18.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="165" x="430.5" y="27.8467">SecurityContextHolder</text><line style="stroke:#181818;stroke-width:0.5;" x1="402.5" x2="597.5" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="402.5" x2="597.5" y1="47" y2="47"/></g><!--MD5=[b00487d6bf686e0753c86de455de36ac]
link AbstractAuthenticationProcessingFilter to Authentication--><g id="link_AbstractAuthenticationProcessingFilter_Authentication"><path codeLine="9" d="M248.298,164.292 C254.397,178.365 263.067,196.351 273,211 C278.911,219.718 285.672,228.45 292.687,236.826 " fill="none" id="AbstractAuthenticationProcessingFilter-to-Authentication" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="296.149,240.908,293.3795,231.4565,292.9154,237.0943,287.2777,236.6302,296.149,240.908" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145" x="274" y="207.0669">get input from request</text></g><!--MD5=[25fdd9560b2de9b6208e0d2d975a4377]
reverse link AuthenticationManager to ProviderManager--><g id="link_AuthenticationManager_ProviderManager"><path d="M351,499.578 C351,513.362 351,528.057 351,539.828 " fill="none" id="AuthenticationManager-backto-ProviderManager" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="344,499.217,351,479.217,358,499.217,344,499.217" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[83bcadf0d29904e4dce5e049716729f3]
link ProviderManager to AuthenticationProvider--><g id="link_ProviderManager_AuthenticationProvider"><path codeLine="17" d="M351,600.229 C351,600.229 351,624.201 351,635.676 " fill="none" id="ProviderManager-AuthenticationProvider" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="351,648.856,355,639.856,351,643.856,347,639.856,351,648.856" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="351" x2="351" y1="643.856" y2="635.856"/><polygon fill="#181818" points="351,588.229,347,594.229,351,600.229,355,594.229,351,588.229" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="342.025" y="608.046">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="7" x="343.4203" y="637.9937">*</text></g><!--MD5=[aeed24337b800ae79537f0bf711a382a]
reverse link AuthenticationProvider to DaoAuthenticationProvider--><g id="link_AuthenticationProvider_DaoAuthenticationProvider"><path d="M294.632,744.0491 C277.362,760.4558 259.265,777.6487 245.333,790.8838 " fill="none" id="AuthenticationProvider-backto-DaoAuthenticationProvider" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="289.83,738.956,309.152,730.256,299.473,749.106,289.83,738.956" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[cd65c48639d911a24e85236a1de7faec]
reverse link AuthenticationProvider to JwtAuthenticationProvider--><g id="link_AuthenticationProvider_JwtAuthenticationProvider"><path d="M407.368,744.0491 C424.638,760.4558 442.735,777.6487 456.667,790.8838 " fill="none" id="AuthenticationProvider-backto-JwtAuthenticationProvider" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="402.527,749.106,392.848,730.256,412.17,738.956,402.527,749.106" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[21ef70cdb7a5d5f81f0a3e417597dad7]
link Authentication to AuthenticationManager--><g id="link_Authentication_AuthenticationManager"><path codeLine="21" d="M259.59,354.241 C247.402,368.462 242.085,384.445 252,401 C258.677,412.148 268.588,421.083 279.596,428.203 " fill="none" id="Authentication-to-AuthenticationManager" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="284.033,430.943,278.4791,422.8095,279.7794,428.3149,274.2741,429.6152,284.033,430.943" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="253" y="397.0669">input for authentication</text></g><!--MD5=[966acda81ffd9e35fc1fad5309d012f6]
link AuthenticationManager to Authentication--><g id="link_AuthenticationManager_Authentication"><path codeLine="22" d="M386.783,430.963 C401.266,418.506 413.45,402 408,384 C405.383,375.356 401.572,366.787 397.141,358.602 " fill="none" id="AuthenticationManager-to-Authentication" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="394.62,354.096,395.5244,363.9032,397.0617,358.4593,402.5056,359.9966,394.62,354.096" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139" x="410" y="397.0669">get success response</text></g><!--MD5=[bbe5e9cfe640d9801466b518a1b0ec10]
link SecurityContextHolder to SecurityContext--><g id="link_SecurityContextHolder_SecurityContext"><path codeLine="26" d="M500,67.217 C500,67.217 500,91.502 500,102.563 " fill="none" id="SecurityContextHolder-SecurityContext" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="500,115.828,504,106.828,500,110.828,496,106.828,500,115.828" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="500" x2="500" y1="110.828" y2="102.828"/><polygon fill="#181818" points="500,55.217,496,61.217,500,67.217,504,61.217,500,55.217" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="491.025" y="75.0311">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="490.975" y="104.796">1</text></g><!--MD5=[975aa200029110868636c73963594511]
link SecurityContext to Authentication--><g id="link_SecurityContext_Authentication"><path codeLine="27" d="M469.3903,172.944 C469.3903,172.944 432.543,211.4 413.606,231.163 " fill="none" id="SecurityContext-Authentication" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="404.416,240.754,413.531,237.0235,407.8755,237.144,407.755,231.4884,404.416,240.754" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="407.8755" x2="413.41" y1="237.144" y2="231.367"/><polygon fill="#181818" points="477.693,164.28,470.6536,165.8444,469.3903,172.944,476.4297,171.3796,477.693,164.28" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="448" y="207.0669">after autenticate sucess</text></g><!--MD5=[af7ebaa83f254726714aac3fbb9bb6a5]
@startuml
interface Authentication {
    Collection<? extends GrantedAuthority> getAuthorities(); // 权限信息
    Object getCredentials(); // 用户校验信息
    Object getDetails();
    Object getPrincipal(); // 用户标识信息
}
abstract class AbstractAuthenticationProcessingFilter

AbstractAuthenticationProcessingFilter - -> Authentication: get input from request

interface AuthenticationManager
class ProviderManager implements AuthenticationManager
interface AuthenticationProvider {
    Authentication authenticate(Authentication authentication) throws AuthenticationException;
    boolean supports(Class<?> authentication);
}
ProviderManager "1" *- -> "*" AuthenticationProvider
class DaoAuthenticationProvider implements AuthenticationProvider
class JwtAuthenticationProvider implements AuthenticationProvider

Authentication - -> AuthenticationManager: input for authentication
AuthenticationManager - -> Authentication: get success response

interface SecurityContext
class SecurityContextHolder
SecurityContextHolder "1" *- -> "1" SecurityContext
SecurityContext *- -> Authentication: after autenticate sucess
@enduml

PlantUML version 1.2022.2(Sat Mar 05 16:30:19 UTC 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>

<p><img src="/2021/02/spring-security/authentication/providermanagers-parent.png"></p>
<h2 id="常见的认证方式"><a href="#常见的认证方式" class="headerlink" title="常见的认证方式"></a>常见的认证方式</h2><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="113px" preserveAspectRatio="none" style="width:431px;height:113px;background:#FFFFFF;" version="1.1" viewBox="0 0 431 113" width="431px" zoomAndPan="magnify"><defs/><g><rect height="95.4844" style="stroke:#00000000;stroke-width:1.0;fill:none;" width="413" x="5" y="5"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="5" x="10" y="24.9951"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105" x="15" y="24.9951">常见的认证方式</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="5" x="120" y="24.9951"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="5" x="154" y="24.9951"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="154" x="159" y="24.9951">Spring Security实现</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="5" x="313" y="24.9951"> </text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="134" x="15" y="41.292">Basic/FormLogin</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="221" x="159" y="41.292">DaoAuthenticationProvider</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="61" x="15" y="57.5889">OAuth2</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="30" x="159" y="57.5889">待续</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="41" x="15" y="73.8857">LDAP</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="30" x="159" y="73.8857">待续</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="105" x="15" y="90.1826">通过第三方认证</text><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="249" x="159" y="90.1826">Pre-Authentication Framework</text><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="413" y1="12" y2="12"/><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="413" y1="28.2969" y2="28.2969"/><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="413" y1="44.5938" y2="44.5938"/><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="413" y1="60.8906" y2="60.8906"/><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="413" y1="77.1875" y2="77.1875"/><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="413" y1="93.4844" y2="93.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="10" x2="10" y1="12" y2="93.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="154" x2="154" y1="12" y2="93.4844"/><line style="stroke:#000000;stroke-width:1.0;" x1="413" x2="413" y1="12" y2="93.4844"/><!--MD5=[5717be06fd5ba7d5199372f176aa0c85]
@startuml
title
|= **常见的认证方式** |= **Spring Security实现** |
| Basic/FormLogin | DaoAuthenticationProvider |
| OAuth2 | 待续 |
| LDAP | 待续 |
| 通过第三方认证 | Pre-Authentication Framework |
end title
@enduml

PlantUML version 1.2022.2(Sat Mar 05 16:30:19 UTC 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>

<h3 id="DaoAuthenticationProvider对Basic-FormLogin的支持"><a href="#DaoAuthenticationProvider对Basic-FormLogin的支持" class="headerlink" title="DaoAuthenticationProvider对Basic/FormLogin的支持"></a>DaoAuthenticationProvider对Basic/FormLogin的支持</h3><p>用于对username/password这种形式的认证信息进行校验,<br>认证信息通过<strong>UsernamePasswordAuthenticationToken</strong>进行包装.<br>其中password可以从本地服务中获取.</p>
<h4 id="FormLogin流程"><a href="#FormLogin流程" class="headerlink" title="FormLogin流程"></a>FormLogin流程</h4><p><img src="/2021/02/spring-security/authentication/loginurlauthenticationentrypoint.png"></p>
<p><img src="/2021/02/spring-security/authentication/usernamepasswordauthenticationfilter.png"></p>
<ul>
<li>LoginUrlAuthenticationEntryPoint, 在认证失败时, 重导向到登录页面</li>
<li>UsernamePasswordAuthenticationFilter处理登录页面的认证请求</li>
</ul>
<h4 id="Basic流程"><a href="#Basic流程" class="headerlink" title="Basic流程"></a>Basic流程</h4><p><img src="/2021/02/spring-security/authentication/basicauthenticationentrypoint.png"></p>
<p><img src="/2021/02/spring-security/authentication/basicauthenticationfilter.png"></p>
<ul>
<li>BasicAuthenticationEntryPoint, 在认证失败时返回WWW-Authenticate头信息</li>
<li>BasicAuthenticationFilter, 处理Basic认证请求</li>
</ul>
<h4 id="DaoAuthenticationProvider的设计"><a href="#DaoAuthenticationProvider的设计" class="headerlink" title="DaoAuthenticationProvider的设计"></a>DaoAuthenticationProvider的设计</h4><p><img src="/2021/02/spring-security/authentication/daoauthenticationprovider.png"></p>
<hr>
<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="660px" preserveAspectRatio="none" style="width:1322px;height:660px;background:#FFFFFF;" version="1.1" viewBox="0 0 1322 660" width="1322px" zoomAndPan="magnify"><defs/><g><!--MD5=[a139e992f8a77546bf37c14edd197f06]
class Authentication--><g id="elem_Authentication"><rect codeLine="1" fill="#F1F1F1" height="48" id="Authentication" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="221" y="358"/><ellipse cx="236" cy="374" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M236.9531,370.7813 L238.6719,370.7813 C239.0625,370.7813 239.25,370.75 239.375,370.6719 C239.6406,370.5156 239.7813,370.2344 239.7813,369.9375 C239.7813,369.6719 239.6719,369.4063 239.4375,369.2344 C239.2656,369.125 239.125,369.0938 238.6719,369.0938 L233.5313,369.0938 C233.0938,369.0938 232.9688,369.1094 232.8125,369.2031 C232.5625,369.3594 232.4063,369.6563 232.4063,369.9375 C232.4063,370.2188 232.5469,370.4688 232.7656,370.6406 C232.9219,370.75 233.1094,370.7813 233.5313,370.7813 L235.25,370.7813 L235.25,377.2969 L233.5313,377.2969 C233.0938,377.2969 232.9688,377.3125 232.8125,377.4219 C232.5625,377.5781 232.4063,377.8594 232.4063,378.1563 C232.4063,378.4063 232.5469,378.6719 232.7656,378.8281 C232.9219,378.9531 233.125,379 233.5313,379 L238.6719,379 C239.4219,379 239.7813,378.7188 239.7813,378.1563 C239.7813,377.875 239.6719,377.625 239.4375,377.4531 C239.2656,377.3281 239.125,377.2969 238.6719,377.2969 L236.9531,377.2969 L236.9531,370.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="104" x="250" y="378.8467">Authentication</text><line style="stroke:#181818;stroke-width:0.5;" x1="222" x2="356" y1="390" y2="390"/><line style="stroke:#181818;stroke-width:0.5;" x1="222" x2="356" y1="398" y2="398"/></g><!--MD5=[11ccd37da9cde826af907da9156f9e97]
class UsernamePasswordAuthenticationToken--><g id="elem_UsernamePasswordAuthenticationToken"><rect codeLine="2" fill="#F1F1F1" height="48" id="UsernamePasswordAuthenticationToken" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="322" x="7" y="548"/><ellipse cx="22" cy="564" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M24.3438,559.6719 C23.4063,559.2344 22.8125,559.0938 21.9375,559.0938 C19.3125,559.0938 17.3125,561.1719 17.3125,563.8906 L17.3125,565.0156 C17.3125,567.5938 19.4219,569.4844 22.3125,569.4844 C23.5313,569.4844 24.6875,569.1875 25.4375,568.6406 C26.0156,568.2344 26.3438,567.7813 26.3438,567.3906 C26.3438,566.9375 25.9531,566.5469 25.4844,566.5469 C25.2656,566.5469 25.0625,566.625 24.875,566.8125 C24.4219,567.2969 24.4219,567.2969 24.2344,567.3906 C23.8125,567.6563 23.125,567.7813 22.3594,567.7813 C20.3125,567.7813 19.0156,566.6875 19.0156,564.9844 L19.0156,563.8906 C19.0156,562.1094 20.2656,560.7969 22,560.7969 C22.5781,560.7969 23.1875,560.9531 23.6563,561.2031 C24.1406,561.4844 24.3125,561.7031 24.4063,562.1094 C24.4688,562.5156 24.5,562.6406 24.6406,562.7656 C24.7813,562.9063 25.0156,563.0156 25.2344,563.0156 C25.5,563.0156 25.7656,562.875 25.9375,562.6563 C26.0469,562.5 26.0781,562.3125 26.0781,561.8906 L26.0781,560.4688 C26.0781,560.0313 26.0625,559.9063 25.9688,559.75 C25.8125,559.4844 25.5313,559.3438 25.2344,559.3438 C24.9375,559.3438 24.7344,559.4375 24.5156,559.75 L24.3438,559.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="290" x="36" y="568.8467">UsernamePasswordAuthenticationToken</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="328" y1="580" y2="580"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="328" y1="588" y2="588"/></g><!--MD5=[46be0f02d3ccb60e27af689741ef5b84]
class UserDetails--><g id="elem_UserDetails"><rect codeLine="4" fill="#F1F1F1" height="162.0781" id="UserDetails" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="431" x="364.5" y="491"/><ellipse cx="535.25" cy="507" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M536.2031,503.7813 L537.9219,503.7813 C538.3125,503.7813 538.5,503.75 538.625,503.6719 C538.8906,503.5156 539.0313,503.2344 539.0313,502.9375 C539.0313,502.6719 538.9219,502.4063 538.6875,502.2344 C538.5156,502.125 538.375,502.0938 537.9219,502.0938 L532.7813,502.0938 C532.3438,502.0938 532.2188,502.1094 532.0625,502.2031 C531.8125,502.3594 531.6563,502.6563 531.6563,502.9375 C531.6563,503.2188 531.7969,503.4688 532.0156,503.6406 C532.1719,503.75 532.3594,503.7813 532.7813,503.7813 L534.5,503.7813 L534.5,510.2969 L532.7813,510.2969 C532.3438,510.2969 532.2188,510.3125 532.0625,510.4219 C531.8125,510.5781 531.6563,510.8594 531.6563,511.1563 C531.6563,511.4063 531.7969,511.6719 532.0156,511.8281 C532.1719,511.9531 532.375,512 532.7813,512 L537.9219,512 C538.6719,512 539.0313,511.7188 539.0313,511.1563 C539.0313,510.875 538.9219,510.625 538.6875,510.4531 C538.5156,510.3281 538.375,510.2969 537.9219,510.2969 L536.2031,510.2969 L536.2031,503.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="81" x="555.75" y="511.8467">UserDetails</text><line style="stroke:#181818;stroke-width:0.5;" x1="365.5" x2="794.5" y1="523" y2="523"/><line style="stroke:#181818;stroke-width:0.5;" x1="365.5" x2="794.5" y1="531" y2="531"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="419" x="370.5" y="547.9951">Collection&lt;? extends GrantedAuthority&gt; getAuthorities();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="154" x="370.5" y="564.292">String getPassword();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="159" x="370.5" y="580.5889">String getUsername();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="230" x="370.5" y="596.8857">boolean isAccountNonExpired();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="227" x="370.5" y="613.1826">boolean isAccountNonLocked();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="253" x="370.5" y="629.4795">boolean isCredentialsNonExpired();</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="146" x="370.5" y="645.7764">boolean isEnabled();</text></g><!--MD5=[f107d47aaaf8c36237664e7a50bee098]
class UserDetailsService--><g id="elem_UserDetailsService"><rect codeLine="13" fill="#F1F1F1" height="64.2969" id="UserDetailsService" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="650" x="392" y="350"/><ellipse cx="645.75" cy="366" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M646.7031,362.7813 L648.4219,362.7813 C648.8125,362.7813 649,362.75 649.125,362.6719 C649.3906,362.5156 649.5313,362.2344 649.5313,361.9375 C649.5313,361.6719 649.4219,361.4063 649.1875,361.2344 C649.0156,361.125 648.875,361.0938 648.4219,361.0938 L643.2813,361.0938 C642.8438,361.0938 642.7188,361.1094 642.5625,361.2031 C642.3125,361.3594 642.1563,361.6563 642.1563,361.9375 C642.1563,362.2188 642.2969,362.4688 642.5156,362.6406 C642.6719,362.75 642.8594,362.7813 643.2813,362.7813 L645,362.7813 L645,369.2969 L643.2813,369.2969 C642.8438,369.2969 642.7188,369.3125 642.5625,369.4219 C642.3125,369.5781 642.1563,369.8594 642.1563,370.1563 C642.1563,370.4063 642.2969,370.6719 642.5156,370.8281 C642.6719,370.9531 642.875,371 643.2813,371 L648.4219,371 C649.1719,371 649.5313,370.7188 649.5313,370.1563 C649.5313,369.875 649.4219,369.625 649.1875,369.4531 C649.0156,369.3281 648.875,369.2969 648.4219,369.2969 L646.7031,369.2969 L646.7031,362.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="134" x="666.25" y="370.8467">UserDetailsService</text><line style="stroke:#181818;stroke-width:0.5;" x1="393" x2="1041" y1="382" y2="382"/><line style="stroke:#181818;stroke-width:0.5;" x1="393" x2="1041" y1="390" y2="390"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="638" x="398" y="406.9951">UserDetails loadUserByUsername(String username) throws UsernameNotFoundException;</text></g><!--MD5=[4e882bed8fc05804831fd4dd919c29f3]
class InMemoryUserDetailsManager--><g id="elem_InMemoryUserDetailsManager"><rect codeLine="17" fill="#F1F1F1" height="48" id="InMemoryUserDetailsManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="245" x="830.5" y="548"/><ellipse cx="845.5" cy="564" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M847.8438,559.6719 C846.9063,559.2344 846.3125,559.0938 845.4375,559.0938 C842.8125,559.0938 840.8125,561.1719 840.8125,563.8906 L840.8125,565.0156 C840.8125,567.5938 842.9219,569.4844 845.8125,569.4844 C847.0313,569.4844 848.1875,569.1875 848.9375,568.6406 C849.5156,568.2344 849.8438,567.7813 849.8438,567.3906 C849.8438,566.9375 849.4531,566.5469 848.9844,566.5469 C848.7656,566.5469 848.5625,566.625 848.375,566.8125 C847.9219,567.2969 847.9219,567.2969 847.7344,567.3906 C847.3125,567.6563 846.625,567.7813 845.8594,567.7813 C843.8125,567.7813 842.5156,566.6875 842.5156,564.9844 L842.5156,563.8906 C842.5156,562.1094 843.7656,560.7969 845.5,560.7969 C846.0781,560.7969 846.6875,560.9531 847.1563,561.2031 C847.6406,561.4844 847.8125,561.7031 847.9063,562.1094 C847.9688,562.5156 848,562.6406 848.1406,562.7656 C848.2813,562.9063 848.5156,563.0156 848.7344,563.0156 C849,563.0156 849.2656,562.875 849.4375,562.6563 C849.5469,562.5 849.5781,562.3125 849.5781,561.8906 L849.5781,560.4688 C849.5781,560.0313 849.5625,559.9063 849.4688,559.75 C849.3125,559.4844 849.0313,559.3438 848.7344,559.3438 C848.4375,559.3438 848.2344,559.4375 848.0156,559.75 L847.8438,559.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="213" x="859.5" y="568.8467">InMemoryUserDetailsManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="831.5" x2="1074.5" y1="580" y2="580"/><line style="stroke:#181818;stroke-width:0.5;" x1="831.5" x2="1074.5" y1="588" y2="588"/></g><!--MD5=[65bfb2e110df778e1b55eaba9937d5d6]
class JdbcUserDetailsManager--><g id="elem_JdbcUserDetailsManager"><rect codeLine="18" fill="#F1F1F1" height="48" id="JdbcUserDetailsManager" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="205" x="1110.5" y="548"/><ellipse cx="1125.5" cy="564" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1127.8438,559.6719 C1126.9063,559.2344 1126.3125,559.0938 1125.4375,559.0938 C1122.8125,559.0938 1120.8125,561.1719 1120.8125,563.8906 L1120.8125,565.0156 C1120.8125,567.5938 1122.9219,569.4844 1125.8125,569.4844 C1127.0313,569.4844 1128.1875,569.1875 1128.9375,568.6406 C1129.5156,568.2344 1129.8438,567.7813 1129.8438,567.3906 C1129.8438,566.9375 1129.4531,566.5469 1128.9844,566.5469 C1128.7656,566.5469 1128.5625,566.625 1128.375,566.8125 C1127.9219,567.2969 1127.9219,567.2969 1127.7344,567.3906 C1127.3125,567.6563 1126.625,567.7813 1125.8594,567.7813 C1123.8125,567.7813 1122.5156,566.6875 1122.5156,564.9844 L1122.5156,563.8906 C1122.5156,562.1094 1123.7656,560.7969 1125.5,560.7969 C1126.0781,560.7969 1126.6875,560.9531 1127.1563,561.2031 C1127.6406,561.4844 1127.8125,561.7031 1127.9063,562.1094 C1127.9688,562.5156 1128,562.6406 1128.1406,562.7656 C1128.2813,562.9063 1128.5156,563.0156 1128.7344,563.0156 C1129,563.0156 1129.2656,562.875 1129.4375,562.6563 C1129.5469,562.5 1129.5781,562.3125 1129.5781,561.8906 L1129.5781,560.4688 C1129.5781,560.0313 1129.5625,559.9063 1129.4688,559.75 C1129.3125,559.4844 1129.0313,559.3438 1128.7344,559.3438 C1128.4375,559.3438 1128.2344,559.4375 1128.0156,559.75 L1127.8438,559.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="173" x="1139.5" y="568.8467">JdbcUserDetailsManager</text><line style="stroke:#181818;stroke-width:0.5;" x1="1111.5" x2="1314.5" y1="580" y2="580"/><line style="stroke:#181818;stroke-width:0.5;" x1="1111.5" x2="1314.5" y1="588" y2="588"/></g><!--MD5=[f2f4f081f533f1801637718551dd4ff8]
class PasswordEncoder--><g id="elem_PasswordEncoder"><rect codeLine="20" fill="#F1F1F1" height="48" id="PasswordEncoder" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157" x="1077.5" y="358"/><ellipse cx="1092.5" cy="374" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M1093.4531,370.7813 L1095.1719,370.7813 C1095.5625,370.7813 1095.75,370.75 1095.875,370.6719 C1096.1406,370.5156 1096.2813,370.2344 1096.2813,369.9375 C1096.2813,369.6719 1096.1719,369.4063 1095.9375,369.2344 C1095.7656,369.125 1095.625,369.0938 1095.1719,369.0938 L1090.0313,369.0938 C1089.5938,369.0938 1089.4688,369.1094 1089.3125,369.2031 C1089.0625,369.3594 1088.9063,369.6563 1088.9063,369.9375 C1088.9063,370.2188 1089.0469,370.4688 1089.2656,370.6406 C1089.4219,370.75 1089.6094,370.7813 1090.0313,370.7813 L1091.75,370.7813 L1091.75,377.2969 L1090.0313,377.2969 C1089.5938,377.2969 1089.4688,377.3125 1089.3125,377.4219 C1089.0625,377.5781 1088.9063,377.8594 1088.9063,378.1563 C1088.9063,378.4063 1089.0469,378.6719 1089.2656,378.8281 C1089.4219,378.9531 1089.625,379 1090.0313,379 L1095.1719,379 C1095.9219,379 1096.2813,378.7188 1096.2813,378.1563 C1096.2813,377.875 1096.1719,377.625 1095.9375,377.4531 C1095.7656,377.3281 1095.625,377.2969 1095.1719,377.2969 L1093.4531,377.2969 L1093.4531,370.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="125" x="1106.5" y="378.8467">PasswordEncoder</text><line style="stroke:#181818;stroke-width:0.5;" x1="1078.5" x2="1233.5" y1="390" y2="390"/><line style="stroke:#181818;stroke-width:0.5;" x1="1078.5" x2="1233.5" y1="398" y2="398"/></g><!--MD5=[e50894ae502f944247a776c1db7e5ae2]
class AbstractUserDetailsAuthenticationProvider--><g id="elem_AbstractUserDetailsAuthenticationProvider"><rect codeLine="22" fill="#F1F1F1" height="48" id="AbstractUserDetailsAuthenticationProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="335" x="20.5" y="116"/><ellipse cx="35.5" cy="132" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M37.5781,133.8125 L37.9688,134.7969 L37.5781,134.7969 C37.125,134.7969 37.0156,134.8125 36.8594,134.9219 C36.6094,135.0781 36.4531,135.3594 36.4531,135.6563 C36.4531,135.9219 36.5938,136.1719 36.8125,136.3281 C36.9531,136.4531 37.1563,136.5 37.5781,136.5 L39.9375,136.5 C40.2969,136.5 40.5156,136.4688 40.6563,136.375 C40.9063,136.2344 41.0625,135.9375 41.0625,135.6563 C41.0625,135.375 40.9219,135.125 40.7031,134.9688 C40.5313,134.8281 40.375,134.7969 39.9063,134.7969 L36.5156,126.5938 L32.8438,126.5938 C32.3906,126.5938 32.2656,126.6094 32.1094,126.7031 C31.8594,126.875 31.7031,127.1563 31.7031,127.4375 C31.7031,127.7188 31.8438,127.9688 32.0625,128.1406 C32.2344,128.25 32.4063,128.2813 32.8438,128.2813 L33.9219,128.2813 L31.2813,134.7969 C30.8594,134.7969 30.7031,134.8125 30.5469,134.9219 C30.2969,135.0781 30.1406,135.3594 30.1406,135.6563 C30.1406,136.2188 30.5156,136.5 31.2656,136.5 L33.5313,136.5 C33.8906,136.5 34.1094,136.4688 34.2344,136.375 C34.5,136.2344 34.6406,135.9375 34.6406,135.6563 C34.6406,135.375 34.5156,135.125 34.2969,134.9531 C34.125,134.8281 33.9844,134.7969 33.5313,134.7969 L33.1406,134.7969 L33.5313,133.8125 L37.5781,133.8125 Z M36.875,132.1094 L34.2031,132.1094 L35.5469,128.8438 L36.875,132.1094 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="303" x="49.5" y="136.8467">AbstractUserDetailsAuthenticationProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="21.5" x2="354.5" y1="148" y2="148"/><line style="stroke:#181818;stroke-width:0.5;" x1="21.5" x2="354.5" y1="156" y2="156"/></g><!--MD5=[f074fdee743888442a4f97901e556f9c]
class AuthenticationProvider--><g id="elem_AuthenticationProvider"><rect fill="#F1F1F1" height="48" id="AuthenticationProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195" x="90.5" y="7"/><ellipse cx="105.5" cy="23" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M106.4531,19.7813 L108.1719,19.7813 C108.5625,19.7813 108.75,19.75 108.875,19.6719 C109.1406,19.5156 109.2813,19.2344 109.2813,18.9375 C109.2813,18.6719 109.1719,18.4063 108.9375,18.2344 C108.7656,18.125 108.625,18.0938 108.1719,18.0938 L103.0313,18.0938 C102.5938,18.0938 102.4688,18.1094 102.3125,18.2031 C102.0625,18.3594 101.9063,18.6563 101.9063,18.9375 C101.9063,19.2188 102.0469,19.4688 102.2656,19.6406 C102.4219,19.75 102.6094,19.7813 103.0313,19.7813 L104.75,19.7813 L104.75,26.2969 L103.0313,26.2969 C102.5938,26.2969 102.4688,26.3125 102.3125,26.4219 C102.0625,26.5781 101.9063,26.8594 101.9063,27.1563 C101.9063,27.4063 102.0469,27.6719 102.2656,27.8281 C102.4219,27.9531 102.625,28 103.0313,28 L108.1719,28 C108.9219,28 109.2813,27.7188 109.2813,27.1563 C109.2813,26.875 109.1719,26.625 108.9375,26.4531 C108.7656,26.3281 108.625,26.2969 108.1719,26.2969 L106.4531,26.2969 L106.4531,19.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="163" x="119.5" y="27.8467">AuthenticationProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="91.5" x2="284.5" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="91.5" x2="284.5" y1="47" y2="47"/></g><!--MD5=[3e6b436126ba7aa842e4929fc17143d3]
class DaoAuthenticationProvider--><g id="elem_DaoAuthenticationProvider"><rect codeLine="25" fill="#F1F1F1" height="48" id="DaoAuthenticationProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="228" x="412" y="225"/><ellipse cx="427" cy="241" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M429.3438,236.6719 C428.4063,236.2344 427.8125,236.0938 426.9375,236.0938 C424.3125,236.0938 422.3125,238.1719 422.3125,240.8906 L422.3125,242.0156 C422.3125,244.5938 424.4219,246.4844 427.3125,246.4844 C428.5313,246.4844 429.6875,246.1875 430.4375,245.6406 C431.0156,245.2344 431.3438,244.7813 431.3438,244.3906 C431.3438,243.9375 430.9531,243.5469 430.4844,243.5469 C430.2656,243.5469 430.0625,243.625 429.875,243.8125 C429.4219,244.2969 429.4219,244.2969 429.2344,244.3906 C428.8125,244.6563 428.125,244.7813 427.3594,244.7813 C425.3125,244.7813 424.0156,243.6875 424.0156,241.9844 L424.0156,240.8906 C424.0156,239.1094 425.2656,237.7969 427,237.7969 C427.5781,237.7969 428.1875,237.9531 428.6563,238.2031 C429.1406,238.4844 429.3125,238.7031 429.4063,239.1094 C429.4688,239.5156 429.5,239.6406 429.6406,239.7656 C429.7813,239.9063 430.0156,240.0156 430.2344,240.0156 C430.5,240.0156 430.7656,239.875 430.9375,239.6563 C431.0469,239.5 431.0781,239.3125 431.0781,238.8906 L431.0781,237.4688 C431.0781,237.0313 431.0625,236.9063 430.9688,236.75 C430.8125,236.4844 430.5313,236.3438 430.2344,236.3438 C429.9375,236.3438 429.7344,236.4375 429.5156,236.75 L429.3438,236.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="196" x="441" y="245.8467">DaoAuthenticationProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="413" x2="639" y1="257" y2="257"/><line style="stroke:#181818;stroke-width:0.5;" x1="413" x2="639" y1="265" y2="265"/></g><!--MD5=[870d52f46d07a550b9e9374cff9acf4c]
reverse link Authentication to UsernamePasswordAuthenticationToken--><g id="link_Authentication_UsernamePasswordAuthenticationToken"><path d="M263.212,423.068 C238.795,461.004 202.98,516.651 182.958,547.759 " fill="none" id="Authentication-backto-UsernamePasswordAuthenticationToken" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="257.453,419.082,274.163,406.052,269.225,426.659,257.453,419.082" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[45e387fe18bda4addb889c9c207baf98]
link UserDetailsService to UserDetails--><g id="link_UserDetailsService_UserDetails"><path codeLine="16" d="M694.377,414.044 C679.877,433.942 660.301,460.806 641.445,486.681 " fill="none" id="UserDetailsService-to-UserDetails" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="638.426,490.824,646.9605,485.9085,641.3718,486.7839,640.4963,481.1952,638.426,490.824" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="670" y="457.0669">load by username</text></g><!--MD5=[843ffc135ba8e2ebc716254ed007b36c]
reverse link UserDetailsService to InMemoryUserDetailsManager--><g id="link_UserDetailsService_InMemoryUserDetailsManager"><path d="M773.051,426.69 C780.445,432.495 787.913,438.381 795,444 C840.502,480.077 892.986,522.407 924.549,547.942 " fill="none" id="UserDetailsService-backto-InMemoryUserDetailsManager" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="768.59,432.087,757.162,414.244,777.223,421.066,768.59,432.087" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[89b2dedc39347097d858f0052e95b9d7]
reverse link UserDetailsService to JdbcUserDetailsManager--><g id="link_UserDetailsService_JdbcUserDetailsManager"><path d="M883.519,419.04 C950.313,436.496 1026.96,460.402 1093,491 C1126.17,506.367 1160.54,530.227 1183.95,547.894 " fill="none" id="UserDetailsService-backto-JdbcUserDetailsManager" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="881.688,425.797,864.046,414.059,885.157,412.234,881.688,425.797" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[383be3bbcfe5b0a772fd6df83b5d47e2]
reverse link AuthenticationProvider to AbstractUserDetailsAuthenticationProvider--><g id="link_AuthenticationProvider_AbstractUserDetailsAuthenticationProvider"><path d="M188,75.578 C188,89.362 188,104.057 188,115.828 " fill="none" id="AuthenticationProvider-backto-AbstractUserDetailsAuthenticationProvider" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="181,75.217,188,55.217,195,75.217,181,75.217" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6c19cc34b9928c48b60274495b655158]
link AbstractUserDetailsAuthenticationProvider to UsernamePasswordAuthenticationToken--><g id="link_AbstractUserDetailsAuthenticationProvider_UsernamePasswordAuthenticationToken"><path codeLine="23" d="M186.925,164.119 C183.527,237.177 173.025,462.954 169.315,542.727 " fill="none" id="AbstractUserDetailsAuthenticationProvider-to-UsernamePasswordAuthenticationToken" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="169.081,547.767,173.4958,538.9631,169.3139,542.7724,165.5045,538.5905,169.081,547.767" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="182" y="316.0669">supports</text></g><!--MD5=[7f30a35ba6832e5a5c31c0a83f5727d0]
reverse link AbstractUserDetailsAuthenticationProvider to DaoAuthenticationProvider--><g id="link_AbstractUserDetailsAuthenticationProvider_DaoAuthenticationProvider"><path d="M280.306,170.221 C334.718,187.446 402.593,208.933 453.206,224.956 " fill="none" id="AbstractUserDetailsAuthenticationProvider-backto-DaoAuthenticationProvider" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="none" points="277.88,176.795,260.925,164.086,282.105,163.448,277.88,176.795" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[a831ffdc7adc0dc07e91451c253f7acf]
link DaoAuthenticationProvider to UserDetailsService--><g id="link_DaoAuthenticationProvider_UserDetailsService"><path codeLine="26" d="M569.6027,279.9069 C569.6027,279.9069 632.183,322.827 661.052,342.627 " fill="none" id="DaoAuthenticationProvider-UserDetailsService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="671.801,350,666.6411,341.611,667.6775,347.1721,662.1164,348.2085,671.801,350" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="667.6775" x2="661.0805" y1="347.1721" y2="342.6465"/><polygon fill="none" points="559.707,273.119,562.3922,279.8115,569.6027,279.9069,566.9175,273.2144,559.707,273.119" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150" x="629" y="316.0669">used to get UserDetails</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="558.9481" y="292.9092">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="653.6537" y="338.9031">1</text></g><!--MD5=[da82cdef0e07b5b6b17f703ca30eab10]
link DaoAuthenticationProvider to PasswordEncoder--><g id="link_DaoAuthenticationProvider_PasswordEncoder"><path codeLine="27" d="M652.0509,268.9593 C652.0509,268.9593 922.411,315.053 1060,350 C1065.2,351.322 1070.54,352.772 1075.9,354.3 " fill="none" id="DaoAuthenticationProvider-PasswordEncoder" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="1088.4,357.984,1080.8964,351.6047,1083.6036,356.5717,1078.6366,359.2789,1088.4,357.984" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="1083.6036" x2="1075.925" y1="356.5717" y2="354.308"/><polygon fill="none" points="640.201,267.067,645.4951,271.9631,652.0509,268.9593,646.7567,264.0632,640.201,267.067" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149" x="930" y="316.0669">encode input password</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="648.1426" y="264.8483">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="8" x="1062.0525" y="346.9919">1</text></g><!--MD5=[5b74c333b37f88d07bab4f54dc922f4e]
link DaoAuthenticationProvider to Authentication--><g id="link_DaoAuthenticationProvider_Authentication"><path codeLine="29" d="M419.832,273.065 C397.685,280.569 375.244,290.346 356,303 C336.062,316.11 318.678,336.796 306.617,353.571 " fill="none" id="DaoAuthenticationProvider-to-Authentication" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="303.667,357.745,312.1281,352.7041,306.5529,353.6619,305.5951,348.0867,303.667,357.745" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="239" x="357" y="316.0669">create with UserDetails after success</text></g><!--MD5=[94b70b3d7cd3bf9778d7e2cb1ac1f1bc]
@startuml
interface Authentication
class UsernamePasswordAuthenticationToken implements Authentication

interface UserDetails {
    Collection<? extends GrantedAuthority> getAuthorities();
    String getPassword();
    String getUsername();
    boolean isAccountNonExpired();
    boolean isAccountNonLocked();
    boolean isCredentialsNonExpired();
    boolean isEnabled();
}
interface UserDetailsService {
    UserDetails loadUserByUsername(String username) throws UsernameNotFoundException;
}
UserDetailsService - -> UserDetails: load by username
class InMemoryUserDetailsManager implements UserDetailsService
class JdbcUserDetailsManager implements UserDetailsService

interface PasswordEncoder

abstract class AbstractUserDetailsAuthenticationProvider implements AuthenticationProvider
AbstractUserDetailsAuthenticationProvider - -> UsernamePasswordAuthenticationToken: supports

class DaoAuthenticationProvider extends AbstractUserDetailsAuthenticationProvider
DaoAuthenticationProvider "1" o- -> "1" UserDetailsService: used to get UserDetails
DaoAuthenticationProvider "1" o- -> "1" PasswordEncoder: encode input password

DaoAuthenticationProvider - -> Authentication: create with UserDetails after success
@enduml

PlantUML version 1.2022.2(Sat Mar 05 16:30:19 UTC 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>

<p>通过UserDetailsService来查询username来获取对应的UserDetails用户信息, 包括用于校验的密码信息.</p>
<p>由于密码往往通过某种加密方式加密后保存,<br>所以需要通过PasswordEncoder对输入的password进行加密后, 再同UserDetails中的密码信息进行比较.</p>
<h3 id="LDAP"><a href="#LDAP" class="headerlink" title="LDAP"></a>LDAP</h3><p>待续</p>
<h3 id="OAuth2"><a href="#OAuth2" class="headerlink" title="OAuth2"></a>OAuth2</h3><p>待续</p>
<h3 id="Pre-Authentication-Framework对第三方认证的集成"><a href="#Pre-Authentication-Framework对第三方认证的集成" class="headerlink" title="Pre-Authentication Framework对第三方认证的集成"></a>Pre-Authentication Framework对第三方认证的集成</h3><?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="454px" preserveAspectRatio="none" style="width:1247px;height:454px;background:#FFFFFF;" version="1.1" viewBox="0 0 1247 454" width="1247px" zoomAndPan="magnify"><defs/><g><!--MD5=[a139e992f8a77546bf37c14edd197f06]
class Authentication--><g id="elem_Authentication"><rect codeLine="1" fill="#F1F1F1" height="48" id="Authentication" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="136" x="7" y="132.5"/><ellipse cx="22" cy="148.5" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M22.9531,145.2813 L24.6719,145.2813 C25.0625,145.2813 25.25,145.25 25.375,145.1719 C25.6406,145.0156 25.7813,144.7344 25.7813,144.4375 C25.7813,144.1719 25.6719,143.9063 25.4375,143.7344 C25.2656,143.625 25.125,143.5938 24.6719,143.5938 L19.5313,143.5938 C19.0938,143.5938 18.9688,143.6094 18.8125,143.7031 C18.5625,143.8594 18.4063,144.1563 18.4063,144.4375 C18.4063,144.7188 18.5469,144.9688 18.7656,145.1406 C18.9219,145.25 19.1094,145.2813 19.5313,145.2813 L21.25,145.2813 L21.25,151.7969 L19.5313,151.7969 C19.0938,151.7969 18.9688,151.8125 18.8125,151.9219 C18.5625,152.0781 18.4063,152.3594 18.4063,152.6563 C18.4063,152.9063 18.5469,153.1719 18.7656,153.3281 C18.9219,153.4531 19.125,153.5 19.5313,153.5 L24.6719,153.5 C25.4219,153.5 25.7813,153.2188 25.7813,152.6563 C25.7813,152.375 25.6719,152.125 25.4375,151.9531 C25.2656,151.8281 25.125,151.7969 24.6719,151.7969 L22.9531,151.7969 L22.9531,145.2813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="104" x="36" y="153.3467">Authentication</text><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="142" y1="164.5" y2="164.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="8" x2="142" y1="172.5" y2="172.5"/></g><!--MD5=[0a527c260276f2adeb26d462c49f2eb1]
class PreAuthenticatedAuthenticationToken--><g id="elem_PreAuthenticatedAuthenticationToken"><rect codeLine="2" fill="#F1F1F1" height="48" id="PreAuthenticatedAuthenticationToken" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="313" x="280.5" y="282"/><ellipse cx="295.5" cy="298" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M297.8438,293.6719 C296.9063,293.2344 296.3125,293.0938 295.4375,293.0938 C292.8125,293.0938 290.8125,295.1719 290.8125,297.8906 L290.8125,299.0156 C290.8125,301.5938 292.9219,303.4844 295.8125,303.4844 C297.0313,303.4844 298.1875,303.1875 298.9375,302.6406 C299.5156,302.2344 299.8438,301.7813 299.8438,301.3906 C299.8438,300.9375 299.4531,300.5469 298.9844,300.5469 C298.7656,300.5469 298.5625,300.625 298.375,300.8125 C297.9219,301.2969 297.9219,301.2969 297.7344,301.3906 C297.3125,301.6563 296.625,301.7813 295.8594,301.7813 C293.8125,301.7813 292.5156,300.6875 292.5156,298.9844 L292.5156,297.8906 C292.5156,296.1094 293.7656,294.7969 295.5,294.7969 C296.0781,294.7969 296.6875,294.9531 297.1563,295.2031 C297.6406,295.4844 297.8125,295.7031 297.9063,296.1094 C297.9688,296.5156 298,296.6406 298.1406,296.7656 C298.2813,296.9063 298.5156,297.0156 298.7344,297.0156 C299,297.0156 299.2656,296.875 299.4375,296.6563 C299.5469,296.5 299.5781,296.3125 299.5781,295.8906 L299.5781,294.4688 C299.5781,294.0313 299.5625,293.9063 299.4688,293.75 C299.3125,293.4844 299.0313,293.3438 298.7344,293.3438 C298.4375,293.3438 298.2344,293.4375 298.0156,293.75 L297.8438,293.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="281" x="309.5" y="302.8467">PreAuthenticatedAuthenticationToken</text><line style="stroke:#181818;stroke-width:0.5;" x1="281.5" x2="592.5" y1="314" y2="314"/><line style="stroke:#181818;stroke-width:0.5;" x1="281.5" x2="592.5" y1="322" y2="322"/></g><!--MD5=[03ee0ff52a68fae8a05f965fdb6ff93a]
class AbstractPreAuthenticatedProcessingFilter--><g id="elem_AbstractPreAuthenticatedProcessingFilter"><rect codeLine="4" fill="#F1F1F1" height="80.5938" id="AbstractPreAuthenticatedProcessingFilter" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="519" x="178.5" y="116"/><ellipse cx="286.75" cy="132" fill="#A9DCDF" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M288.8281,133.8125 L289.2188,134.7969 L288.8281,134.7969 C288.375,134.7969 288.2656,134.8125 288.1094,134.9219 C287.8594,135.0781 287.7031,135.3594 287.7031,135.6563 C287.7031,135.9219 287.8438,136.1719 288.0625,136.3281 C288.2031,136.4531 288.4063,136.5 288.8281,136.5 L291.1875,136.5 C291.5469,136.5 291.7656,136.4688 291.9063,136.375 C292.1563,136.2344 292.3125,135.9375 292.3125,135.6563 C292.3125,135.375 292.1719,135.125 291.9531,134.9688 C291.7813,134.8281 291.625,134.7969 291.1563,134.7969 L287.7656,126.5938 L284.0938,126.5938 C283.6406,126.5938 283.5156,126.6094 283.3594,126.7031 C283.1094,126.875 282.9531,127.1563 282.9531,127.4375 C282.9531,127.7188 283.0938,127.9688 283.3125,128.1406 C283.4844,128.25 283.6563,128.2813 284.0938,128.2813 L285.1719,128.2813 L282.5313,134.7969 C282.1094,134.7969 281.9531,134.8125 281.7969,134.9219 C281.5469,135.0781 281.3906,135.3594 281.3906,135.6563 C281.3906,136.2188 281.7656,136.5 282.5156,136.5 L284.7813,136.5 C285.1406,136.5 285.3594,136.4688 285.4844,136.375 C285.75,136.2344 285.8906,135.9375 285.8906,135.6563 C285.8906,135.375 285.7656,135.125 285.5469,134.9531 C285.375,134.8281 285.2344,134.7969 284.7813,134.7969 L284.3906,134.7969 L284.7813,133.8125 L288.8281,133.8125 Z M288.125,132.1094 L285.4531,132.1094 L286.7969,128.8438 L288.125,132.1094 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="294" x="307.25" y="136.8467">AbstractPreAuthenticatedProcessingFilter</text><line style="stroke:#181818;stroke-width:0.5;" x1="179.5" x2="696.5" y1="148" y2="148"/><line style="stroke:#181818;stroke-width:0.5;" x1="179.5" x2="696.5" y1="156" y2="156"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="487" x="184.5" y="172.9951">Object getPreAuthenticatedPrincipal(HttpServletRequest request);</text><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="507" x="184.5" y="189.292">Object getPreAuthenticatedCredentials(HttpServletRequest request);</text></g><!--MD5=[5088913581926414f8666565f4476809]
class PreAuthenticatedAuthenticationProvider--><g id="elem_PreAuthenticatedAuthenticationProvider"><rect codeLine="11" fill="#F1F1F1" height="48" id="PreAuthenticatedAuthenticationProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="328" x="736" y="132.5"/><ellipse cx="751" cy="148.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M753.3438,144.1719 C752.4063,143.7344 751.8125,143.5938 750.9375,143.5938 C748.3125,143.5938 746.3125,145.6719 746.3125,148.3906 L746.3125,149.5156 C746.3125,152.0938 748.4219,153.9844 751.3125,153.9844 C752.5313,153.9844 753.6875,153.6875 754.4375,153.1406 C755.0156,152.7344 755.3438,152.2813 755.3438,151.8906 C755.3438,151.4375 754.9531,151.0469 754.4844,151.0469 C754.2656,151.0469 754.0625,151.125 753.875,151.3125 C753.4219,151.7969 753.4219,151.7969 753.2344,151.8906 C752.8125,152.1563 752.125,152.2813 751.3594,152.2813 C749.3125,152.2813 748.0156,151.1875 748.0156,149.4844 L748.0156,148.3906 C748.0156,146.6094 749.2656,145.2969 751,145.2969 C751.5781,145.2969 752.1875,145.4531 752.6563,145.7031 C753.1406,145.9844 753.3125,146.2031 753.4063,146.6094 C753.4688,147.0156 753.5,147.1406 753.6406,147.2656 C753.7813,147.4063 754.0156,147.5156 754.2344,147.5156 C754.5,147.5156 754.7656,147.375 754.9375,147.1563 C755.0469,147 755.0781,146.8125 755.0781,146.3906 L755.0781,144.9688 C755.0781,144.5313 755.0625,144.4063 754.9688,144.25 C754.8125,143.9844 754.5313,143.8438 754.2344,143.8438 C753.9375,143.8438 753.7344,143.9375 753.5156,144.25 L753.3438,144.1719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="296" x="765" y="153.3467">PreAuthenticatedAuthenticationProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="737" x2="1063" y1="164.5" y2="164.5"/><line style="stroke:#181818;stroke-width:0.5;" x1="737" x2="1063" y1="172.5" y2="172.5"/></g><!--MD5=[f074fdee743888442a4f97901e556f9c]
class AuthenticationProvider--><g id="elem_AuthenticationProvider"><rect fill="#F1F1F1" height="48" id="AuthenticationProvider" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="195" x="802.5" y="7"/><ellipse cx="817.5" cy="23" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M818.4531,19.7813 L820.1719,19.7813 C820.5625,19.7813 820.75,19.75 820.875,19.6719 C821.1406,19.5156 821.2813,19.2344 821.2813,18.9375 C821.2813,18.6719 821.1719,18.4063 820.9375,18.2344 C820.7656,18.125 820.625,18.0938 820.1719,18.0938 L815.0313,18.0938 C814.5938,18.0938 814.4688,18.1094 814.3125,18.2031 C814.0625,18.3594 813.9063,18.6563 813.9063,18.9375 C813.9063,19.2188 814.0469,19.4688 814.2656,19.6406 C814.4219,19.75 814.6094,19.7813 815.0313,19.7813 L816.75,19.7813 L816.75,26.2969 L815.0313,26.2969 C814.5938,26.2969 814.4688,26.3125 814.3125,26.4219 C814.0625,26.5781 813.9063,26.8594 813.9063,27.1563 C813.9063,27.4063 814.0469,27.6719 814.2656,27.8281 C814.4219,27.9531 814.625,28 815.0313,28 L820.1719,28 C820.9219,28 821.2813,27.7188 821.2813,27.1563 C821.2813,26.875 821.1719,26.625 820.9375,26.4531 C820.7656,26.3281 820.625,26.2969 820.1719,26.2969 L818.4531,26.2969 L818.4531,19.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="163" x="831.5" y="27.8467">AuthenticationProvider</text><line style="stroke:#181818;stroke-width:0.5;" x1="803.5" x2="996.5" y1="39" y2="39"/><line style="stroke:#181818;stroke-width:0.5;" x1="803.5" x2="996.5" y1="47" y2="47"/></g><!--MD5=[b87e532ea19bf6765177dedb1b69328c]
class AuthenticationUserDetailsService--><g id="elem_AuthenticationUserDetailsService"><rect codeLine="14" fill="#F1F1F1" height="64.2969" id="AuthenticationUserDetailsService" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="549" x="628.5" y="274"/><ellipse cx="701.75" cy="290" fill="#B4A7E5" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M702.7031,286.7813 L704.4219,286.7813 C704.8125,286.7813 705,286.75 705.125,286.6719 C705.3906,286.5156 705.5313,286.2344 705.5313,285.9375 C705.5313,285.6719 705.4219,285.4063 705.1875,285.2344 C705.0156,285.125 704.875,285.0938 704.4219,285.0938 L699.2813,285.0938 C698.8438,285.0938 698.7188,285.1094 698.5625,285.2031 C698.3125,285.3594 698.1563,285.6563 698.1563,285.9375 C698.1563,286.2188 698.2969,286.4688 698.5156,286.6406 C698.6719,286.75 698.8594,286.7813 699.2813,286.7813 L701,286.7813 L701,293.2969 L699.2813,293.2969 C698.8438,293.2969 698.7188,293.3125 698.5625,293.4219 C698.3125,293.5781 698.1563,293.8594 698.1563,294.1563 C698.1563,294.4063 698.2969,294.6719 698.5156,294.8281 C698.6719,294.9531 698.875,295 699.2813,295 L704.4219,295 C705.1719,295 705.5313,294.7188 705.5313,294.1563 C705.5313,293.875 705.4219,293.625 705.1875,293.4531 C705.0156,293.3281 704.875,293.2969 704.4219,293.2969 L702.7031,293.2969 L702.7031,286.7813 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" font-style="italic" lengthAdjust="spacing" textLength="238" x="722.25" y="294.8467">AuthenticationUserDetailsService</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="154" x="1026.5" y="271"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="152" x="1027.5" y="283.1387">T extends Authentication</text><line style="stroke:#181818;stroke-width:0.5;" x1="629.5" x2="1176.5" y1="306" y2="306"/><line style="stroke:#181818;stroke-width:0.5;" x1="629.5" x2="1176.5" y1="314" y2="314"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="537" x="634.5" y="330.9951">UserDetails loadUserDetails(T token) throws UsernameNotFoundException;</text></g><!--MD5=[2443eed8f9e9a988abe676176e90dba7]
class PreAuthenticatedGrantedAuthoritiesUserDetailsService--><g id="elem_PreAuthenticatedGrantedAuthoritiesUserDetailsService"><rect codeLine="17" fill="#F1F1F1" height="48" id="PreAuthenticatedGrantedAuthoritiesUserDetailsService" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="667" x="569.5" y="399"/><ellipse cx="584.5" cy="415" fill="#ADD1B2" rx="11" ry="11" style="stroke:#181818;stroke-width:1.0;"/><path d="M586.8438,410.6719 C585.9063,410.2344 585.3125,410.0938 584.4375,410.0938 C581.8125,410.0938 579.8125,412.1719 579.8125,414.8906 L579.8125,416.0156 C579.8125,418.5938 581.9219,420.4844 584.8125,420.4844 C586.0313,420.4844 587.1875,420.1875 587.9375,419.6406 C588.5156,419.2344 588.8438,418.7813 588.8438,418.3906 C588.8438,417.9375 588.4531,417.5469 587.9844,417.5469 C587.7656,417.5469 587.5625,417.625 587.375,417.8125 C586.9219,418.2969 586.9219,418.2969 586.7344,418.3906 C586.3125,418.6563 585.625,418.7813 584.8594,418.7813 C582.8125,418.7813 581.5156,417.6875 581.5156,415.9844 L581.5156,414.8906 C581.5156,413.1094 582.7656,411.7969 584.5,411.7969 C585.0781,411.7969 585.6875,411.9531 586.1563,412.2031 C586.6406,412.4844 586.8125,412.7031 586.9063,413.1094 C586.9688,413.5156 587,413.6406 587.1406,413.7656 C587.2813,413.9063 587.5156,414.0156 587.7344,414.0156 C588,414.0156 588.2656,413.875 588.4375,413.6563 C588.5469,413.5 588.5781,413.3125 588.5781,412.8906 L588.5781,411.4688 C588.5781,411.0313 588.5625,410.9063 588.4688,410.75 C588.3125,410.4844 588.0313,410.3438 587.7344,410.3438 C587.4375,410.3438 587.2344,410.4375 587.0156,410.75 L586.8438,410.6719 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="401" x="598.5" y="419.8467">PreAuthenticatedGrantedAuthoritiesUserDetailsService</text><rect fill="#FFFFFF" height="15.9688" style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" width="232" x="1007.5" y="396"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacing" textLength="230" x="1008.5" y="408.1387">PreAuthenticatedAuthenticationToken</text><line style="stroke:#181818;stroke-width:0.5;" x1="570.5" x2="1235.5" y1="431" y2="431"/><line style="stroke:#181818;stroke-width:0.5;" x1="570.5" x2="1235.5" y1="439" y2="439"/></g><!--MD5=[be6a3d1dcac53e2ab4826498bc5756be]
reverse link Authentication to PreAuthenticatedAuthenticationToken--><g id="link_Authentication_PreAuthenticatedAuthenticationToken"><path d="M142.146,188.789 C148.498,191.613 154.857,194.39 161,197 C233.93,227.987 318.994,260.776 375.202,281.985 " fill="none" id="Authentication-backto-PreAuthenticatedAuthenticationToken" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="139.247,195.161,123.9,180.55,145.009,182.401,139.247,195.161" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[6a6411c5d703042920fd9f98f82c0708]
link AbstractPreAuthenticatedProcessingFilter to PreAuthenticatedAuthenticationToken--><g id="link_AbstractPreAuthenticatedProcessingFilter_PreAuthenticatedAuthenticationToken"><path codeLine="9" d="M437.732,197.027 C437.562,222.15 437.345,254.08 437.192,276.682 " fill="none" id="AbstractPreAuthenticatedProcessingFilter-to-PreAuthenticatedAuthenticationToken" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="437.156,281.93,441.2151,272.9565,437.1889,276.9301,433.2152,272.9039,437.156,281.93" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="231" x="439" y="240.0669">create with principal and credentials</text></g><!--MD5=[cc780e56c8f9cada408bb05c8a5b7581]
reverse link AuthenticationProvider to PreAuthenticatedAuthenticationProvider--><g id="link_AuthenticationProvider_PreAuthenticatedAuthenticationProvider"><path d="M900,75.348 C900,94.547 900,116.357 900,132.375 " fill="none" id="AuthenticationProvider-backto-PreAuthenticatedAuthenticationProvider" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="893,75.229,900,55.229,907,75.229,893,75.229" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[f8d3de3b2a42b0fc38eede56518a87ee]
link PreAuthenticatedAuthenticationProvider to PreAuthenticatedAuthenticationToken--><g id="link_PreAuthenticatedAuthenticationProvider_PreAuthenticatedAuthenticationToken"><path codeLine="12" d="M846.643,180.575 C802.301,199.218 737.269,225.335 679,244 C635.88,257.813 587.638,270.513 545.641,280.708 " fill="none" id="PreAuthenticatedAuthenticationProvider-to-PreAuthenticatedAuthenticationToken" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="540.551,281.938,550.2387,283.7123,545.4111,280.7637,548.3598,275.9361,540.551,281.938" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="56" x="729" y="240.0669">supports</text></g><!--MD5=[64e46f9a1b0d8687e9d7875f4bda4583]
reverse link AuthenticationUserDetailsService to PreAuthenticatedGrantedAuthoritiesUserDetailsService--><g id="link_AuthenticationUserDetailsService_PreAuthenticatedGrantedAuthoritiesUserDetailsService"><path d="M903,358.1775 C903,372.4037 903,387.1525 903,398.8836 " fill="none" id="AuthenticationUserDetailsService-backto-PreAuthenticatedGrantedAuthoritiesUserDetailsService" style="stroke:#181818;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="896,358.1207,903,338.121,910,358.1206,896,358.1207" style="stroke:#181818;stroke-width:1.0;"/></g><!--MD5=[4bd39572668121beefccfb4aacee4120]
link PreAuthenticatedAuthenticationProvider to AuthenticationUserDetailsService--><g id="link_PreAuthenticatedAuthenticationProvider_AuthenticationUserDetailsService"><path codeLine="18" d="M900.713,192.5445 C900.713,192.5445 901.665,239.375 902.101,260.816 " fill="none" id="PreAuthenticatedAuthenticationProvider-AuthenticationUserDetailsService" style="stroke:#181818;stroke-width:1.0;"/><polygon fill="#181818" points="902.367,273.899,906.1822,264.8191,902.2648,268.9,898.1839,264.9826,902.367,273.899" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="902.2648" x2="902.103" y1="268.9" y2="260.902"/><polygon fill="none" points="900.469,180.547,896.5918,186.6271,900.713,192.5445,904.5902,186.4644,900.469,180.547" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="53" x="902" y="240.0669">get user</text></g><!--MD5=[245263a28ba6290dde98b9cfeb00e482]
@startuml
interface Authentication
class PreAuthenticatedAuthenticationToken implements Authentication

abstract class AbstractPreAuthenticatedProcessingFilter {
    Object getPreAuthenticatedPrincipal(HttpServletRequest request);
    Object getPreAuthenticatedCredentials(HttpServletRequest request);
}

AbstractPreAuthenticatedProcessingFilter - -> PreAuthenticatedAuthenticationToken: create with principal and credentials

class PreAuthenticatedAuthenticationProvider implements AuthenticationProvider
PreAuthenticatedAuthenticationProvider - -> PreAuthenticatedAuthenticationToken: supports

interface AuthenticationUserDetailsService<T extends Authentication> {
    UserDetails loadUserDetails(T token) throws UsernameNotFoundException;
}
class PreAuthenticatedGrantedAuthoritiesUserDetailsService<PreAuthenticatedAuthenticationToken> implements AuthenticationUserDetailsService
PreAuthenticatedAuthenticationProvider o- -> AuthenticationUserDetailsService: get user
@enduml

PlantUML version 1.2022.2(Sat Mar 05 16:30:19 UTC 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>

<ul>
<li>AbstractPreAuthenticatedProcessingFilter, Pre-Authentication Framework的入口</li>
<li>PreAuthenticatedAuthenticationToken, 包含第三方的用户校验信息或者认证成功后的用户信息</li>
<li>PreAuthenticatedAuthenticationProvider, Pre-Authentication Framework默认的校验器</li>
<li>AuthenticationUserDetailsService, 同第三方进行校验, 在校验成功后获取系统中的用户信息</li>
</ul>
<h3 id="Remember-Me"><a href="#Remember-Me" class="headerlink" title="Remember Me"></a>Remember Me</h3><p>待续</p>
<h2 id="Session管理"><a href="#Session管理" class="headerlink" title="Session管理"></a>Session管理</h2><p>Http Session相关的功能都在以下组件中进行处理:</p>
<ul>
<li>SessionManagementFilter</li>
<li>SessionAuthenticationStrategy, 对认证成功的用户进行session校验</li>
<li>SessionRegistry, 存储session和认证后的用户信息的键值对</li>
</ul>
<p>主要处理以下问题:</p>
<ul>
<li>防御会话固定攻击(session-fixation protection attack)<ul>
<li>SessionFixationProtectionStrategy</li>
</ul>
</li>
<li>检查Session是否超时<ul>
<li>InvalidSessionStrategy, 对无效session进行处理</li>
</ul>
</li>
<li>限制用户的同时登录数<ul>
<li>ConcurrentSessionFilter</li>
<li>ConcurrentSessionControlAuthenticationStrategy</li>
</ul>
</li>
</ul>
<h2 id="登出处理"><a href="#登出处理" class="headerlink" title="登出处理"></a>登出处理</h2><p>登出时会对用户相关的登录信息进行清理:</p>
<ul>
<li>session无效化</li>
<li>清理SecurityContextHolder</li>
<li>重导向到登录页面</li>
<li>清理Cookies</li>
</ul>
<p>通过LogoutHandler进行清理, 不可以抛出异常.</p>
<p>LogoutSuccessHandler在logout成功后,<br>进行重定向(默认为/login?logout)或者返回指定的http status code(默认为200).</p>
<h2 id="Authentication-Events"><a href="#Authentication-Events" class="headerlink" title="Authentication Events"></a>Authentication Events</h2><p>登录成功或者失败都会触发AuthenticationException事件, 根据事件做额外的处理.<br>通过AuthenticationEventPublisher来监听这些事件.</p>
<h2 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h2><ul>
<li><a target="_blank" rel="noopener" href="https://docs.spring.io/spring-security/site/docs/5.4.2/reference/html5/#servlet-authentication">Servlet Authentication</a></li>
</ul>

    </div>

    
    
    
      
  <div class="popular-posts-header">相关文章</div>
  <ul class="popular-posts">
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2021/01/spring-security/architecture/" rel="bookmark">Spring Security --- Architecture</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2021/08/spring-security/authorization/" rel="bookmark">Spring Security --- Authorization</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2018/05/spring/request-workflow/" rel="bookmark">Spring --- 请求处理流程</a></div>
    </li>
    <li class="popular-posts-item">
      <div class="popular-posts-title"><a href="/2022/03/spring/spring-mvc/" rel="bookmark">Spring MVC RESTful请求处理流程</a></div>
    </li>
  </ul>

        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>本文作者： </strong>Amos
  </li>
  <li class="post-copyright-link">
    <strong>本文链接：</strong>
    <a href="https://amos.s2u2m.com/2021/02/spring-security/authentication/" title="Spring Security --- Authentication">https://amos.s2u2m.com/2021/02/spring-security/authentication/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-Hans" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/Spring-Security/" rel="tag"># Spring Security</a>
              <a href="/tags/Spring/" rel="tag"># Spring</a>
              <a href="/tags/%E8%AE%A4%E8%AF%81/" rel="tag"># 认证</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/01/spring-security/architecture/" rel="prev" title="Spring Security --- Architecture">
      <i class="fa fa-chevron-left"></i> Spring Security --- Architecture
    </a></div>
      <div class="post-nav-item">
    <a href="/2021/02/%E7%94%9F%E6%B4%BB/hi-mum/" rel="next" title="观<<你好, 李焕英>>后感">
      观<<你好, 李焕英>>后感 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          
    <div class="comments" id="valine-comments"></div>

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#Authentication%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.</span> <span class="nav-text">Authentication设计</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A4%E8%AF%81%E5%A4%84%E7%90%86%E6%B5%81%E7%A8%8B"><span class="nav-number">1.1.</span> <span class="nav-text">认证处理流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A4%E8%AF%81%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="nav-number">1.2.</span> <span class="nav-text">认证的设计</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E7%9A%84%E8%AE%A4%E8%AF%81%E6%96%B9%E5%BC%8F"><span class="nav-number">2.</span> <span class="nav-text">常见的认证方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#DaoAuthenticationProvider%E5%AF%B9Basic-FormLogin%E7%9A%84%E6%94%AF%E6%8C%81"><span class="nav-number">2.1.</span> <span class="nav-text">DaoAuthenticationProvider对Basic&#x2F;FormLogin的支持</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#FormLogin%E6%B5%81%E7%A8%8B"><span class="nav-number">2.1.1.</span> <span class="nav-text">FormLogin流程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Basic%E6%B5%81%E7%A8%8B"><span class="nav-number">2.1.2.</span> <span class="nav-text">Basic流程</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#DaoAuthenticationProvider%E7%9A%84%E8%AE%BE%E8%AE%A1"><span class="nav-number">2.1.3.</span> <span class="nav-text">DaoAuthenticationProvider的设计</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LDAP"><span class="nav-number">2.2.</span> <span class="nav-text">LDAP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#OAuth2"><span class="nav-number">2.3.</span> <span class="nav-text">OAuth2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Pre-Authentication-Framework%E5%AF%B9%E7%AC%AC%E4%B8%89%E6%96%B9%E8%AE%A4%E8%AF%81%E7%9A%84%E9%9B%86%E6%88%90"><span class="nav-number">2.4.</span> <span class="nav-text">Pre-Authentication Framework对第三方认证的集成</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Remember-Me"><span class="nav-number">2.5.</span> <span class="nav-text">Remember Me</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Session%E7%AE%A1%E7%90%86"><span class="nav-number">3.</span> <span class="nav-text">Session管理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%87%BA%E5%A4%84%E7%90%86"><span class="nav-number">4.</span> <span class="nav-text">登出处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Authentication-Events"><span class="nav-number">5.</span> <span class="nav-text">Authentication Events</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reference"><span class="nav-number">6.</span> <span class="nav-text">Reference</span></a></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Amos"
      src="/images/avatar.jpeg">
  <p class="site-author-name" itemprop="name">Amos</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">9</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">15</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="mailto:xiayy860612@126.com" title="E-Mail → mailto:xiayy860612@126.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://github.com/xiayy860612" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;xiayy860612" rel="noopener" target="_blank"><i class="fa fa-github fa-fw"></i>GitHub</a>
      </span>
  </div>
  <div class="cc-license motion-element" itemprop="license">
    <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/zh-Hans" class="cc-opacity" rel="noopener" target="_blank"><img src="/images/cc-by-nc-sa.svg" alt="Creative Commons"></a>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        
  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">蜀ICP备18013492号 </a>
  </div>

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">s2u2m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
      <span class="post-meta-item-text">站点总字数：</span>
    <span title="站点总字数">33k</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  




  
<script src="/js/local-search.js"></script>













  

  


<script>
NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('https://unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick,mail';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el         : '#valine-comments',
      verify     : false,
      notify     : false,
      appId      : 'YnmrykAQHQwGzUR77I61DkKN-9Nh9j0Va',
      appKey     : '4TzKa97Pz2JTg81B8o5l77mO',
      placeholder: "一起来聊一聊呗",
      avatar     : 'retro',
      meta       : guest,
      pageSize   : '10' || 10,
      visitor    : true,
      lang       : '' || 'zh-cn',
      path       : location.pathname,
      recordIP   : true,
      serverURLs : ''
    });
  }, window.Valine);
});
</script>

</body>
</html>
